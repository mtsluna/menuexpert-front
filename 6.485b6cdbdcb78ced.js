"use strict";(self.webpackChunkmenuexpert_front=self.webpackChunkmenuexpert_front||[]).push([[6],{6:(nt,h,a)=>{a.r(h),a.d(h,{DetailModule:()=>ot});var s=a(177),f=a(2791),t=a(4438),l=a(9417),C=a(376),y=a(1028),x=a(6354),O=a(1626);let G=(()=>{class o{constructor(e){this.httpClient=e}getProduct(e,n){return this.httpClient.get(`${y.A.baseUrl}/products/${n}`).pipe((0,x.T)(i=>(i.customizations?.forEach(r=>{r.options.sort((p,d)=>p.price.amount-d.price.amount)}),i)))}static#t=this.\u0275fac=function(n){return new(n||o)(t.KVO(O.Qq))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var F=a(573),R=a(6978),k=a(667),$=a(4963);function E(o,c){if(1&o&&t.nrm(0,"img",2),2&o){const e=t.XpG();t.FS9("src",e.product.image,t.B4B),t.Mz_("alt","photo of the product: ",e.product.title,"")}}function M(o,c){1&o&&t.nrm(0,"div",3)}let P=(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-image"]],inputs:{product:"product"},decls:2,vars:2,consts:[["class","image",3,"src","alt",4,"ngIf"],["class","image image__empty",4,"ngIf"],[1,"image",3,"src","alt"],[1,"image","image__empty"]],template:function(n,i){1&n&&t.DNE(0,E,1,3,"img",0)(1,M,1,0,"div",1),2&n&&(t.Y8G("ngIf",i.product.image),t.R7$(),t.Y8G("ngIf",!i.product.image))},dependencies:[s.bT],styles:[".image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image__empty[_ngcontent-%COMP%]{background-color:#fff;height:3.5rem}"]})}return o})();function S(o,c){if(1&o&&(t.j41(0,"span",7),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.JRh(t.i5U(2,1,e.product.price.amount,e.product.price.currency.code))}}function j(o,c){if(1&o&&(t.j41(0,"div",8),t.EFF(1),t.k0s()),2&o){const e=c.$implicit;t.R7$(),t.SpI(" ",e.name," ")}}let Y=(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-banner"]],inputs:{product:"product"},decls:11,vars:8,consts:[[1,"banner"],[1,"banner__data__title"],[1,"banner__data__price"],["class","banner__data__price__discount",4,"ngIf"],[1,"banner__data__description"],[1,"banner__data__badges"],["class","banner__data__badges__item",4,"ngFor","ngForOf"],[1,"banner__data__price__discount"],[1,"banner__data__badges__item"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2),t.k0s(),t.j41(3,"div",2),t.EFF(4),t.nI1(5,"currency"),t.DNE(6,S,3,4,"span",3),t.k0s(),t.j41(7,"div",4),t.EFF(8),t.k0s(),t.j41(9,"div",5),t.DNE(10,j,2,1,"div",6),t.k0s()()),2&n&&(t.R7$(2),t.SpI(" ",i.product.title," "),t.R7$(2),t.SpI(" ",t.i5U(5,5,i.product.price.amount-(i.product.price.discount||0),i.product.price.currency.code)," "),t.R7$(2),t.Y8G("ngIf",i.product.price.discount&&i.product.price.discount>0),t.R7$(2),t.SpI(" ",i.product.description," "),t.R7$(2),t.Y8G("ngForOf",i.product.badges))},dependencies:[s.Sq,s.bT,s.oe],styles:[".banner[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;display:flex;flex-direction:column;gap:.25rem}.banner__image[_ngcontent-%COMP%]{width:100%}.banner__data__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600}.banner__data__price[_ngcontent-%COMP%]{font-size:1rem;color:#363636;font-weight:550}.banner__data__price__discount[_ngcontent-%COMP%]{color:#989292;font-size:12px;font-weight:400;text-decoration:line-through}.banner__data__description[_ngcontent-%COMP%]{padding:.5rem 0;font-size:.75rem;color:#989292}.banner__data__badges[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.25rem;font-size:12px}.banner__data__badges__item[_ngcontent-%COMP%]{color:#fff;border-radius:10px;padding:.2rem .5rem;background-color:#21a300}"]})}return o})();var B=a(8387);let T=(()=>{class o{constructor(e){this.formBuilder=e,this.form=this.formBuilder.group({comment:[""],quantity:[1]})}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(l.ok))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-observation"]],inputs:{form:"form"},decls:8,vars:2,consts:[[1,"observation",3,"formGroup"],[1,"observation__header__title"],[1,"observation__header__subtitle"],["formControlName","comment","rows","3",1,"observation__content"],[3,"form"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div")(2,"div",1),t.EFF(3," Observaciones "),t.k0s(),t.j41(4,"div",2),t.EFF(5," Escriba aqui cualquier aclaraci\xf3n. "),t.k0s()(),t.nrm(6,"textarea",3)(7,"app-quantity-selector",4),t.k0s()),2&n&&(t.Y8G("formGroup",i.form),t.R7$(7),t.Y8G("form",i.form))},dependencies:[B.U,l.me,l.BC,l.cb,l.j4,l.JD],styles:[".observation[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;padding:1rem;gap:1rem}.observation__header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.observation__header__title[_ngcontent-%COMP%]{font-size:1rem}.observation__header__subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#989292}.observation__content[_ngcontent-%COMP%]{resize:none;width:100%;box-sizing:border-box;background-color:#f6f6f6;border-radius:10px;padding:.5rem;border:none}.observation__content[_ngcontent-%COMP%]:focus{outline:2px solid #000000!important}"]})}return o})();var v=a(2765),g=a(5951);const b=o=>({"option-selector__options__item__name__disabled":o}),I=o=>({"option-selector__options__item__not-display":o});function z(o,c){1&o&&(t.j41(0,"span",14),t.EFF(1,"\xa0\xb7 No disponible"),t.k0s())}function D(o,c){if(1&o&&(t.j41(0,"div",15),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.SpI(" + ",t.i5U(2,1,e.price.amount,null==e||null==e.price||null==e.price.currency?null:e.price.currency.code)," ")}}function X(o,c){if(1&o&&(t.j41(0,"div",8)(1,"div")(2,"div",9),t.EFF(3),t.DNE(4,z,2,0,"span",10),t.k0s(),t.DNE(5,D,3,4,"div",11),t.k0s(),t.j41(6,"div",12),t.nrm(7,"mat-radio-button",13),t.k0s()()),2&o){const e=c.$implicit,n=c.index,i=t.XpG(2);t.R7$(2),t.Y8G("ngClass",t.eq3(8,b,!e.isActive)),t.R7$(),t.SpI(" ",null==e?null:e.title,""),t.R7$(),t.Y8G("ngIf",!e.isActive),t.R7$(),t.Y8G("ngIf",0!==(null==e||null==e.price?null:e.price.amount)&&e.isActive),t.R7$(),t.Y8G("ngClass",t.eq3(10,I,i.enabled)),t.R7$(),t.Y8G("disabled",!e.isActive)("checked",i.getChecked(n))("value",i.makeProduct(n,e))}}function N(o,c){if(1&o&&(t.j41(0,"div",5)(1,"mat-radio-group",6),t.DNE(2,X,8,12,"div",7),t.k0s()()),2&o){const e=t.XpG();t.Y8G("formGroup",e.form),t.R7$(2),t.Y8G("ngForOf",null==e.customization?null:e.customization.options)}}function U(o,c){1&o&&(t.j41(0,"span",14),t.EFF(1,"\xa0\xb7 No disponible"),t.k0s())}function V(o,c){if(1&o&&(t.j41(0,"div",15),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.SpI(" + ",t.i5U(2,1,e.price.amount,null==e||null==e.price||null==e.price.currency?null:e.price.currency.code)," ")}}function A(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",8)(1,"div")(2,"div",9),t.EFF(3),t.DNE(4,U,2,0,"span",10),t.k0s(),t.DNE(5,V,3,4,"div",11),t.k0s(),t.j41(6,"div",12)(7,"mat-checkbox",17),t.bIt("change",function(i){const r=t.eBV(e),p=r.$implicit,d=r.index,m=t.XpG(2);return t.Njj(m.changePick(i,d,p))}),t.k0s()()()}if(2&o){const e=c.$implicit,n=c.index,i=t.XpG(2);t.R7$(2),t.Y8G("ngClass",t.eq3(6,b,!e.isActive)),t.R7$(),t.SpI(" ",null==e?null:e.title,""),t.R7$(),t.Y8G("ngIf",!e.isActive),t.R7$(),t.Y8G("ngIf",0!==(null==e||null==e.price?null:e.price.amount)&&e.isActive),t.R7$(),t.Y8G("ngClass",t.eq3(8,I,i.enabled)),t.R7$(),t.Y8G("formControlName",n)}}function w(o,c){if(1&o&&(t.j41(0,"div",5),t.qex(1,16),t.DNE(2,A,8,10,"div",7),t.bVm(),t.k0s()),2&o){const e=t.XpG();t.Y8G("formGroup",e.form),t.R7$(2),t.Y8G("ngForOf",null==e.customization?null:e.customization.options)}}let J=(()=>{class o{constructor(){}ngOnInit(){}changePick(e,n,i){const r=this.form.get("selected"),p=!!e.checked&&i;r.at(n).setValue(p);const d=r.getRawValue(),m=d.filter(_=>0!=_).length;d.forEach((_,u)=>{!1===_||_.isActive?m==this.customization.max&&0==_||!this.customization.options[u].isActive?r.at(u).disable():r.at(u).enable():r.at(u).disable()})}makeProduct(e,n){return this.customization?.options.map((i,r)=>r===e&&n)}getChecked(e){return this.form.getRawValue().selected.findIndex(n=>0!=n)===e}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-option-selector"]],inputs:{customization:"customization",form:"form",enabled:"enabled"},decls:8,vars:4,consts:[[1,"option-selector"],[1,"option-selector__header"],[1,"option-selector__header__title"],[1,"option-selector__header__description"],["class","option-selector__options",3,"formGroup",4,"ngIf"],[1,"option-selector__options",3,"formGroup"],["formControlName","selected"],["class","option-selector__options__item  option-selector__options__divider",4,"ngFor","ngForOf"],[1,"option-selector__options__item","option-selector__options__divider"],[1,"option-selector__options__item__name",3,"ngClass"],["class","option-selector__options__item__name__disabled__tag",4,"ngIf"],["class","option-selector__options__item__price",4,"ngIf"],[1,"option-selector__options__item__field",3,"ngClass"],["color","primary",3,"disabled","checked","value"],[1,"option-selector__options__item__name__disabled__tag"],[1,"option-selector__options__item__price"],["formArrayName","selected"],["color","primary",3,"change","formControlName"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"div",3),t.EFF(5),t.k0s()(),t.DNE(6,N,3,2,"div",4)(7,w,3,2,"div",4),t.k0s()),2&n&&(t.R7$(3),t.SpI(" ",i.customization.name," "),t.R7$(2),t.SpI(" Elige hasta ",i.customization.max," "),t.R7$(),t.Y8G("ngIf",1===i.customization.max),t.R7$(),t.Y8G("ngIf",i.customization.max>1))},dependencies:[s.YU,s.Sq,s.bT,v.So,l.BC,l.cb,l.j4,l.JD,l.v8,g.VT,g._g,s.oe],styles:[".option-selector[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:column;padding:1rem;gap:.5rem}.option-selector__header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.option-selector__header__title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.option-selector__header__description[_ngcontent-%COMP%]{font-size:.75rem;color:#989292}.option-selector__options[_ngcontent-%COMP%]{display:flex;flex-direction:column}.option-selector__options__divider[_ngcontent-%COMP%]:not(:last-child){border-bottom:#EBEBEB solid 1px}.option-selector__options__item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:.75rem}.option-selector__options__item__name__disabled[_ngcontent-%COMP%]{color:#626262;text-decoration:line-through}.option-selector__options__item__name__disabled__tag[_ngcontent-%COMP%]{text-decoration:none;display:inline-block}.option-selector__options__item__price[_ngcontent-%COMP%]{color:#626262}.option-selector__options__item__price__disabled[_ngcontent-%COMP%]{color:#626262;text-decoration:line-through}.option-selector__options__item__not-display[_ngcontent-%COMP%]{visibility:hidden}"]})}return o})();function q(o,c){1&o&&t.nrm(0,"div",9)}function H(o,c){if(1&o&&t.nrm(0,"app-option-selector",10),2&o){const e=c.$implicit,n=c.index,i=t.XpG(2);t.Y8G("form",i.getFormElement(n))("enabled",!i.store.cartEnabled)("customization",e)}}function K(o,c){if(1&o){const e=t.RV6();t.j41(0,"app-floating-button",11),t.nI1(1,"currency"),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.addItem())}),t.k0s()}if(2&o){const e=t.XpG(2);t.Mz_("title","agregar al pedido \xb7 ",t.i5U(1,3,e.price,e.product.price.currency.code),""),t.Y8G("hidden",!e.store.cartEnabled)}}function L(o,c){if(1&o){const e=t.RV6();t.j41(0,"app-floating-button",11),t.nI1(1,"currency"),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.updateItem())}),t.k0s()}if(2&o){const e=t.XpG(2);t.Mz_("title","modificar pedido \xb7 ",t.i5U(1,3,e.price,e.product.price.currency.code),""),t.Y8G("hidden",!e.store.cartEnabled)}}function Q(o,c){if(1&o&&(t.qex(0),t.nrm(1,"app-image",2),t.DNE(2,q,1,0,"div",3),t.j41(3,"div",4),t.nrm(4,"app-banner",5),t.DNE(5,H,1,3,"app-option-selector",6),t.nrm(6,"app-observation",7),t.DNE(7,K,2,6,"app-floating-button",8)(8,L,2,6,"app-floating-button",8),t.k0s(),t.bVm()),2&o){const e=t.XpG();t.R7$(),t.Y8G("product",e.product),t.R7$(),t.Y8G("ngIf",!e.product.image),t.R7$(2),t.Y8G("product",e.product),t.R7$(),t.Y8G("ngForOf",e.product.customizations),t.R7$(),t.Y8G("hidden",!e.store.cartEnabled)("form",e.form),t.R7$(),t.Y8G("ngIf",!e.cartItem),t.R7$(),t.Y8G("ngIf",e.cartItem)}}let W=(()=>{class o{constructor(e,n,i,r,p,d,m,_){this.formBuilder=e,this.cartService=n,this.router=i,this.activatedRoute=r,this.productService=p,this.storeService=d,this.location=m,this.analytics=_,this.form=this.formBuilder.group({quantity:[1],product:null,comment:[""],selections:[]}),this.error=!1,this.catalogId=this.activatedRoute.snapshot.queryParamMap.get("catalog")||void 0,this.productId=this.activatedRoute.snapshot.paramMap.get("productId")||void 0,this.cartItem=this.activatedRoute.snapshot.queryParamMap.get("cartItem")||void 0,this.store={},this.product={id:"",title:"",price:{discount:0,amount:0,currency:{code:"",name:"",symbol:""}},description:"",badges:[],image:"",customizations:[]},this.analytics.logEvent("detail_view",{catalogId:this.catalogId,productId:this.productId})}ngOnInit(){if(this.store=this.storeService.getStoreFromLocalStorage(),this.catalogId&&this.productId)if(this.cartItem){const e=this.cartService.getItem(this.cartItem,this.catalogId);e.product&&(this.product=e.product),this.form=this.initForm(),this.form.patchValue(e)}else this.productService.getProduct(this.catalogId,this.productId).subscribe({next:e=>{this.product=e,this.form=this.initForm()},error:()=>{this.router.navigate(["not-found"])}})}initForm(){const e=n=>1===n.max?{selected:this.formBuilder.control({value:n.options.map((i,r)=>1===n.max&&r===n.options.map(p=>p.isActive).indexOf(!0)&&i),disabled:!1})}:{selected:this.formBuilder.array(n.options.map((i,r)=>this.formBuilder.control({value:1===n.max&&0==r&&i,disabled:!i.isActive})))};return this.formBuilder.group({id:"",quantity:[1],product:this.product,comment:[""],selections:this.formBuilder.array(this.product?.customizations?.map(n=>this.formBuilder.group({id:[n?.id],...e(n)}))||[])})}getFormElement(e){return this.form.get("selections").at(e)}addItem(){this.cartService.addItem(this.form.getRawValue(),this.catalogId),this.location.back()}updateItem(){this.cartService.updateItem(this.form.getRawValue(),this.catalogId),this.location.back()}get price(){const e=this.form.getRawValue(),n=e?.selections?.map(i=>i.selected.filter(r=>!1!==r).map(r=>r.price).reduce((r,p)=>r+p.amount-(p.discount||0),0)).reduce((i,r)=>i+r,0);return(this.product.price.amount-(this.product.price.discount||0)+n)*e.quantity}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(l.ok),t.rXU(C.m),t.rXU(f.Ix),t.rXU(f.nX),t.rXU(G),t.rXU(F.n),t.rXU(s.aZ),t.rXU(R.f_))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-detail"]],decls:3,vars:1,consts:[[1,"detail"],[4,"ngIf"],[1,"detail__image",3,"product"],["class","detail__image__empty",4,"ngIf"],[1,"detail__content"],[3,"product"],[3,"form","enabled","customization",4,"ngFor","ngForOf"],[3,"hidden","form"],[3,"hidden","title","click",4,"ngIf"],[1,"detail__image__empty"],[3,"form","enabled","customization"],[3,"click","hidden","title"]],template:function(n,i){1&n&&(t.j41(0,"div",0),t.nrm(1,"app-navigator"),t.DNE(2,Q,9,8,"ng-container",1),t.k0s()),2&n&&(t.R7$(2),t.Y8G("ngIf",!i.error))},dependencies:[s.Sq,s.bT,k.d,$.g,P,Y,T,J,s.oe],styles:[".detail[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;margin-bottom:5rem}.detail__image[_ngcontent-%COMP%]{height:12.5rem}.detail__image__empty[_ngcontent-%COMP%]{background-color:#fff;height:3.5rem}.detail__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}"]})}return o})();var Z=a(1494),tt=a(9213);const et=[{path:":productId",component:W}];let ot=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.$C({type:o});static#o=this.\u0275inj=t.G2t({imports:[s.MD,f.iI.forChild(et),Z.G,tt.m_,v.g7,l.X1,g.Wk]})}return o})()}}]);