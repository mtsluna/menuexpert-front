"use strict";(self.webpackChunkshopexpert_front=self.webpackChunkshopexpert_front||[]).push([[812],{812:(M,b,r)=>{r.r(b),r.d(b,{DetailModule:()=>lt});var s=r(177),u=r(2791),h=r(467),t=r(4438),l=r(9417),f=r(8399),P=r(1028),d=r(6354),p=r(1626);let S=(()=>{class n{constructor(e){this.httpClient=e}getProduct(e,o){return this.httpClient.get(`${P.A.baseUrl}/products/${o}`).pipe((0,d.T)(i=>(i.customizations?.forEach(c=>{c.options.sort((_,m)=>_.price.amount-m.price.amount)}),i)))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(p.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $=r(573),R=r(6978),k=r(667),j=r(4963),O=r(9213),B=r(8834),y=r(9170);let x=(()=>{class n{constructor(e){this.modalGalleryService=e,this.images=[]}open(){this.images.length<=0||this.modalGalleryService.open({id:1,images:this.images.map((e,o)=>new y._V(o,{img:e})),currentImage:new y._V(0,{img:this.images[0]}),libConfig:{currentImageConfig:{description:{strategy:y.ms.ALWAYS_HIDDEN}}}})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(y.H8))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-gallery-viewer"]],inputs:{images:"images"},standalone:!0,features:[t.aNF],decls:4,vars:0,consts:[[1,"gallery-viewer"],["mat-mini-fab","","color","accent",3,"click"],["color","primary",1,"gallery-viewer__button__icon"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"button",1),t.bIt("click",function(){return i.open()}),t.j41(2,"mat-icon",2),t.EFF(3,"open_in_full"),t.k0s()()())},dependencies:[O.An,B.$0],styles:[".gallery-viewer[_ngcontent-%COMP%]{position:fixed;top:1rem;right:4rem;z-index:99999}.gallery-viewer__button__icon[_ngcontent-%COMP%]{transform:scale(.8)}"]})}}return n})();function T(n,a){if(1&n&&t.nrm(0,"img",2),2&n){const e=t.XpG();t.FS9("src",e.product.image,t.B4B),t.Mz_("alt","photo of the product: ",e.product.title,"")}}function D(n,a){1&n&&t.nrm(0,"div",3)}let Y=(()=>{class n{constructor(){}ngOnInit(){}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-image"]],inputs:{product:"product"},decls:2,vars:2,consts:[["class","image",3,"src","alt",4,"ngIf"],["class","image image__empty",4,"ngIf"],[1,"image",3,"src","alt"],[1,"image","image__empty"]],template:function(o,i){1&o&&t.DNE(0,T,1,3,"img",0)(1,D,1,0,"div",1),2&o&&(t.Y8G("ngIf",i.product.image),t.R7$(),t.Y8G("ngIf",!i.product.image))},dependencies:[s.bT],styles:[".image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image__empty[_ngcontent-%COMP%]{background-color:#fff;height:3.5rem}"]})}}return n})();function U(n,a){if(1&n&&(t.j41(0,"span",7),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(t.i5U(2,1,e.product.price.amount,e.product.price.currency.code))}}function z(n,a){if(1&n&&(t.j41(0,"div",8),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(),t.SpI(" ",e.name," ")}}let N=(()=>{class n{constructor(){}ngOnInit(){}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-banner"]],inputs:{product:"product"},decls:11,vars:8,consts:[[1,"banner"],[1,"banner__data__title"],[1,"banner__data__price"],["class","banner__data__price__discount",4,"ngIf"],[1,"banner__data__description"],[1,"banner__data__badges"],["class","banner__data__badges__item",4,"ngFor","ngForOf"],[1,"banner__data__price__discount"],[1,"banner__data__badges__item"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2),t.k0s(),t.j41(3,"div",2),t.EFF(4),t.nI1(5,"currency"),t.DNE(6,U,3,4,"span",3),t.k0s(),t.j41(7,"div",4),t.EFF(8),t.k0s(),t.j41(9,"div",5),t.DNE(10,z,2,1,"div",6),t.k0s()()),2&o&&(t.R7$(2),t.SpI(" ",i.product.title," "),t.R7$(2),t.SpI(" ",t.i5U(5,5,i.product.price.amount-(i.product.price.discount||0),i.product.price.currency.code)," "),t.R7$(2),t.Y8G("ngIf",i.product.price.discount&&i.product.price.discount>0),t.R7$(2),t.SpI(" ",i.product.description," "),t.R7$(2),t.Y8G("ngForOf",i.product.badges))},dependencies:[s.Sq,s.bT,s.oe],styles:[".banner[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;display:flex;flex-direction:column;gap:.25rem}.banner__image[_ngcontent-%COMP%]{width:100%}.banner__data__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600}.banner__data__price[_ngcontent-%COMP%]{font-size:1rem;color:#363636;font-weight:550}.banner__data__price__discount[_ngcontent-%COMP%]{color:#989292;font-size:12px;font-weight:400;text-decoration:line-through}.banner__data__description[_ngcontent-%COMP%]{padding:.5rem 0;font-size:.75rem;color:#989292}.banner__data__badges[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.25rem;font-size:12px}.banner__data__badges__item[_ngcontent-%COMP%]{color:#fff;border-radius:10px;padding:.2rem .5rem;background-color:#21a300}"]})}}return n})();var V=r(8387);let A=(()=>{class n{constructor(e){this.formBuilder=e,this.form=this.formBuilder.group({comment:[""],quantity:[1]})}ngOnInit(){}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(l.ok))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-observation"]],inputs:{form:"form"},decls:8,vars:2,consts:[[1,"observation",3,"formGroup"],[1,"observation__header__title"],[1,"observation__header__subtitle"],["formControlName","comment","rows","3",1,"observation__content"],[3,"form"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div")(2,"div",1),t.EFF(3," Observaciones "),t.k0s(),t.j41(4,"div",2),t.EFF(5," Escriba aqui cualquier aclaraci\xf3n. "),t.k0s()(),t.nrm(6,"textarea",3)(7,"app-quantity-selector",4),t.k0s()),2&o&&(t.Y8G("formGroup",i.form),t.R7$(7),t.Y8G("form",i.form))},dependencies:[V.U,l.me,l.BC,l.cb,l.j4,l.JD],styles:[".observation[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;padding:1rem;gap:1rem}.observation__header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.observation__header__title[_ngcontent-%COMP%]{font-size:1rem}.observation__header__subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#989292}.observation__content[_ngcontent-%COMP%]{resize:none;width:100%;box-sizing:border-box;background-color:#f6f6f6;border-radius:10px;padding:.5rem;border:none}.observation__content[_ngcontent-%COMP%]:focus{outline:2px solid #000000!important}"]})}}return n})();var G=r(2765),I=r(5951);const F=n=>({"option-selector__options__item__name__disabled":n}),E=n=>({"option-selector__options__item__not-display":n});function w(n,a){1&n&&(t.j41(0,"span",14),t.EFF(1,"\xa0\xb7 No disponible"),t.k0s())}function X(n,a){if(1&n&&(t.j41(0,"div",15),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" + ",t.i5U(2,1,e.price.amount,null==e||null==e.price||null==e.price.currency?null:e.price.currency.code)," ")}}function J(n,a){if(1&n&&(t.j41(0,"div",8)(1,"div")(2,"div",9),t.EFF(3),t.DNE(4,w,2,0,"span",10),t.k0s(),t.DNE(5,X,3,4,"div",11),t.k0s(),t.j41(6,"div",12),t.nrm(7,"mat-radio-button",13),t.k0s()()),2&n){const e=a.$implicit,o=a.index,i=t.XpG(2);t.R7$(2),t.Y8G("ngClass",t.eq3(8,F,!e.isActive)),t.R7$(),t.SpI(" ",null==e?null:e.title,""),t.R7$(),t.Y8G("ngIf",!e.isActive),t.R7$(),t.Y8G("ngIf",0!==(null==e||null==e.price?null:e.price.amount)&&e.isActive),t.R7$(),t.Y8G("ngClass",t.eq3(10,E,i.enabled)),t.R7$(),t.Y8G("disabled",!e.isActive)("checked",i.getChecked(o))("value",i.makeProduct(o,e))}}function L(n,a){if(1&n&&(t.j41(0,"div",5)(1,"mat-radio-group",6),t.DNE(2,J,8,12,"div",7),t.k0s()()),2&n){const e=t.XpG();t.Y8G("formGroup",e.form),t.R7$(2),t.Y8G("ngForOf",null==e.customization?null:e.customization.options)}}function K(n,a){1&n&&(t.j41(0,"span",14),t.EFF(1,"\xa0\xb7 No disponible"),t.k0s())}function W(n,a){if(1&n&&(t.j41(0,"div",15),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" + ",t.i5U(2,1,e.price.amount,null==e||null==e.price||null==e.price.currency?null:e.price.currency.code)," ")}}function H(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",8)(1,"div")(2,"div",9),t.EFF(3),t.DNE(4,K,2,0,"span",10),t.k0s(),t.DNE(5,W,3,4,"div",11),t.k0s(),t.j41(6,"div",12)(7,"mat-checkbox",17),t.bIt("change",function(i){const c=t.eBV(e),_=c.$implicit,m=c.index,v=t.XpG(2);return t.Njj(v.changePick(i,m,_))}),t.k0s()()()}if(2&n){const e=a.$implicit,o=a.index,i=t.XpG(2);t.R7$(2),t.Y8G("ngClass",t.eq3(6,F,!e.isActive)),t.R7$(),t.SpI(" ",null==e?null:e.title,""),t.R7$(),t.Y8G("ngIf",!e.isActive),t.R7$(),t.Y8G("ngIf",0!==(null==e||null==e.price?null:e.price.amount)&&e.isActive),t.R7$(),t.Y8G("ngClass",t.eq3(8,E,i.enabled)),t.R7$(),t.Y8G("formControlName",o)}}function Q(n,a){if(1&n&&(t.j41(0,"div",5),t.qex(1,16),t.DNE(2,H,8,10,"div",7),t.bVm(),t.k0s()),2&n){const e=t.XpG();t.Y8G("formGroup",e.form),t.R7$(2),t.Y8G("ngForOf",null==e.customization?null:e.customization.options)}}let Z=(()=>{class n{constructor(){}ngOnInit(){}changePick(e,o,i){const c=this.form.get("selected"),_=!!e.checked&&i;c.at(o).setValue(_);const m=c.getRawValue(),v=m.filter(g=>0!=g).length;m.forEach((g,C)=>{!1===g||g.isActive?v==this.customization.max&&0==g||!this.customization.options[C].isActive?c.at(C).disable():c.at(C).enable():c.at(C).disable()})}makeProduct(e,o){return this.customization?.options.map((i,c)=>c===e&&o)}getChecked(e){return this.form.getRawValue().selected.findIndex(o=>0!=o)===e}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-option-selector"]],inputs:{customization:"customization",form:"form",enabled:"enabled"},decls:8,vars:4,consts:[[1,"option-selector"],[1,"option-selector__header"],[1,"option-selector__header__title"],[1,"option-selector__header__description"],["class","option-selector__options",3,"formGroup",4,"ngIf"],[1,"option-selector__options",3,"formGroup"],["formControlName","selected"],["class","option-selector__options__item  option-selector__options__divider",4,"ngFor","ngForOf"],[1,"option-selector__options__item","option-selector__options__divider"],[1,"option-selector__options__item__name",3,"ngClass"],["class","option-selector__options__item__name__disabled__tag",4,"ngIf"],["class","option-selector__options__item__price",4,"ngIf"],[1,"option-selector__options__item__field",3,"ngClass"],["color","primary",3,"disabled","checked","value"],[1,"option-selector__options__item__name__disabled__tag"],[1,"option-selector__options__item__price"],["formArrayName","selected"],["color","primary",3,"change","formControlName"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"div",3),t.EFF(5),t.k0s()(),t.DNE(6,L,3,2,"div",4)(7,Q,3,2,"div",4),t.k0s()),2&o&&(t.R7$(3),t.SpI(" ",i.customization.name," "),t.R7$(2),t.SpI(" Elige hasta ",i.customization.max," "),t.R7$(),t.Y8G("ngIf",1===i.customization.max),t.R7$(),t.Y8G("ngIf",i.customization.max>1))},dependencies:[s.YU,s.Sq,s.bT,G.So,l.BC,l.cb,l.j4,l.JD,l.v8,I.VT,I._g,s.oe],styles:[".option-selector[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:column;padding:1rem;gap:.5rem}.option-selector__header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.option-selector__header__title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.option-selector__header__description[_ngcontent-%COMP%]{font-size:.75rem;color:#989292}.option-selector__options[_ngcontent-%COMP%]{display:flex;flex-direction:column}.option-selector__options__divider[_ngcontent-%COMP%]:not(:last-child){border-bottom:#EBEBEB solid 1px}.option-selector__options__item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:.75rem}.option-selector__options__item__name__disabled[_ngcontent-%COMP%]{color:#626262;text-decoration:line-through}.option-selector__options__item__name__disabled__tag[_ngcontent-%COMP%]{text-decoration:none;display:inline-block}.option-selector__options__item__price[_ngcontent-%COMP%]{color:#626262}.option-selector__options__item__price__disabled[_ngcontent-%COMP%]{color:#626262;text-decoration:line-through}.option-selector__options__item__not-display[_ngcontent-%COMP%]{visibility:hidden}"]})}}return n})();const q=n=>[n],tt=()=>[];function et(n,a){1&n&&t.nrm(0,"div",12)}function nt(n,a){if(1&n&&t.nrm(0,"app-option-selector",13),2&n){const e=a.$implicit,o=a.index,i=t.XpG(2);t.Y8G("form",i.getFormElement(o))("enabled",!i.store.cartEnabled)("customization",e)}}function ot(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-floating-button",14),t.nI1(1,"currency"),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.addItem())}),t.k0s()}if(2&n){const e=t.XpG(2);t.Mz_("title","agregar al pedido \xb7 ",t.i5U(1,3,e.price,e.product.price.currency.code),""),t.Y8G("hidden",!e.store.cartEnabled)}}function it(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-floating-button",14),t.nI1(1,"currency"),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.updateItem())}),t.k0s()}if(2&n){const e=t.XpG(2);t.Mz_("title","modificar pedido \xb7 ",t.i5U(1,3,e.price,e.product.price.currency.code),""),t.Y8G("hidden",!e.store.cartEnabled)}}function rt(n,a){if(1&n&&(t.qex(0),t.j41(1,"div",4),t.nrm(2,"app-image",5),t.DNE(3,et,1,0,"div",6),t.j41(4,"div",7),t.nrm(5,"app-banner",8),t.DNE(6,nt,1,3,"app-option-selector",9),t.nrm(7,"app-observation",10),t.DNE(8,ot,2,6,"app-floating-button",11)(9,it,2,6,"app-floating-button",11),t.k0s()(),t.bVm()),2&n){const e=t.XpG();t.R7$(2),t.Y8G("product",e.product),t.R7$(),t.Y8G("ngIf",!e.product.image),t.R7$(2),t.Y8G("product",e.product),t.R7$(),t.Y8G("ngForOf",e.product.customizations),t.R7$(),t.Y8G("hidden",!e.store.cartEnabled)("form",e.form),t.R7$(),t.Y8G("ngIf",!e.cartItem),t.R7$(),t.Y8G("ngIf",e.cartItem)}}let ct=(()=>{class n{constructor(e,o,i,c,_,m,v,g){this.formBuilder=e,this.cartService=o,this.router=i,this.activatedRoute=c,this.productService=_,this.storeService=m,this.location=v,this.analytics=g,this.form=this.formBuilder.group({quantity:[1],product:null,comment:[""],selections:[]}),this.error=!1,this.catalogId=localStorage.getItem("catalogId")||void 0,this.productId=this.activatedRoute.snapshot.paramMap.get("productId")||void 0,this.cartItem=this.activatedRoute.snapshot.queryParamMap.get("cartItem")||void 0,this.store={},this.product={id:"",title:"",price:{discount:0,amount:0,currency:{code:"",name:"",symbol:""}},description:"",badges:[],image:"",customizations:[]},this.analytics.logEvent("detail_view",{catalogId:this.catalogId,productId:this.productId})}ngOnInit(){if(this.store=this.storeService.getStoreFromLocalStorage(),this.catalogId&&this.productId)if(this.cartItem){const e=this.cartService.getItem(this.cartItem,this.catalogId);e.product&&(this.product=e.product),this.form=this.initForm(),this.form.patchValue(e)}else this.productService.getProduct(this.catalogId,this.productId).subscribe({next:e=>{this.product=e,this.form=this.initForm()},error:()=>{this.router.navigate(["not-found"])}})}initForm(){const e=o=>1===o.max?{selected:this.formBuilder.control({value:o.options.map((i,c)=>1===o.max&&c===o.options.map(_=>_.isActive).indexOf(!0)&&i),disabled:!1})}:{selected:this.formBuilder.array(o.options.map((i,c)=>this.formBuilder.control({value:1===o.max&&0==c&&i,disabled:!i.isActive})))};return this.formBuilder.group({id:"",quantity:[1],product:this.product,comment:[""],selections:this.formBuilder.array(this.product?.customizations?.map(o=>this.formBuilder.group({id:[o?.id],...e(o)}))||[])})}getFormElement(e){return this.form.get("selections").at(e)}addItem(){var e=this;return(0,h.A)(function*(){yield e.cartService.addItem(e.form.getRawValue(),e.catalogId),e.location.back()})()}updateItem(){var e=this;return(0,h.A)(function*(){yield e.cartService.updateItem(e.form.getRawValue()),e.location.back()})()}get price(){const e=this.form.getRawValue(),o=e?.selections?.map(i=>i.selected.filter(c=>!1!==c).map(c=>c.price).reduce((c,_)=>c+_.amount-(_.discount||0),0)).reduce((i,c)=>i+c,0);return(this.product.price.amount-(this.product.price.discount||0)+o)*e.quantity}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(l.ok),t.rXU(f.m),t.rXU(u.Ix),t.rXU(u.nX),t.rXU(S),t.rXU($.n),t.rXU(s.aZ),t.rXU(R.f_))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-detail"]],decls:5,vars:5,consts:[[1,"detail"],[3,"images"],[1,"detail__holder"],[4,"ngIf"],[1,"detail__layout"],[1,"detail__image",3,"product"],["class","detail__image__empty",4,"ngIf"],[1,"detail__content"],[3,"product"],[3,"form","enabled","customization",4,"ngFor","ngForOf"],[3,"hidden","form"],[3,"hidden","title","click",4,"ngIf"],[1,"detail__image__empty"],[3,"form","enabled","customization"],[3,"click","hidden","title"]],template:function(o,i){1&o&&(t.j41(0,"div",0),t.nrm(1,"app-navigator")(2,"app-gallery-viewer",1)(3,"div",2),t.DNE(4,rt,10,8,"ng-container",3),t.k0s()),2&o&&(t.R7$(2),t.Y8G("images",i.product.image?t.eq3(2,q,i.product.image):t.lJ4(4,tt)),t.R7$(2),t.Y8G("ngIf",!i.error))},dependencies:[s.Sq,s.bT,k.d,j.g,x,Y,N,A,Z,s.oe],styles:[".detail[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;flex-direction:column;margin-bottom:5rem}@media (min-width: 1024px){.detail[_ngcontent-%COMP%]{height:calc(100vh - 5rem)}}.detail__layout[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;margin-bottom:5rem;width:100%;height:100%;background-color:#fff}@media (min-width: 1024px){.detail__layout[_ngcontent-%COMP%]{flex-direction:row;width:60%;border-radius:10px;overflow:hidden}}@media (min-width: 1024px){.detail__holder[_ngcontent-%COMP%]{background:#fff;height:3.75rem}}.detail__image[_ngcontent-%COMP%]{height:inherit;object-fit:cover!important}@media (min-width: 1024px){.detail__image[_ngcontent-%COMP%]{width:50%}}.detail__image__empty[_ngcontent-%COMP%]{background-color:#fff;height:inherit}.detail__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}@media (min-width: 1024px){.detail__content[_ngcontent-%COMP%]{width:50%}}"]})}}return n})();var at=r(1494);const st=[{path:":productId",component:ct}];let lt=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[s.MD,u.iI.forChild(st),at.G,O.m_,G.g7,l.X1,I.Wk,x]})}}return n})()},573:(M,b,r)=>{r.d(b,{n:()=>l});var s=r(1028),u=r(6354),h=r(4438),t=r(1626);let l=(()=>{class f{constructor(d){this.httpClient=d}getStoreByCatalogId(d){return this.httpClient.get(`${s.A.baseUrl}/stores/by-catalog/${d}`).pipe((0,u.T)(p=>(localStorage.setItem("store",JSON.stringify(p)),p)))}getStoreById(d){return this.httpClient.get(`${s.A.baseUrl}/stores/${d}`).pipe((0,u.T)(p=>(localStorage.setItem("store",JSON.stringify(p)),p)))}getStoreByName(d){return this.httpClient.get(`${s.A.baseUrl}/stores/by-store-url/${d}`).pipe((0,u.T)(p=>(localStorage.setItem("store",JSON.stringify(p)),p)))}getStoreFromLocalStorage(){const d=localStorage.getItem("store")||"";return JSON.parse(d)}static{this.\u0275fac=function(p){return new(p||f)(h.KVO(t.Qq))}}static{this.\u0275prov=h.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()}}]);