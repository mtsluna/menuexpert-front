"use strict";(self.webpackChunkmenuexpert_front=self.webpackChunkmenuexpert_front||[]).push([[134],{2134:(W,m,a)=>{a.r(m),a.d(m,{CatalogModule:()=>D});var c=a(6895),f=a(9751),h=a(8421);const{isArray:v}=Array;var y=a(515),x=a(5403),b=a(3269);var e=a(4650),g=a(3321),w=a(9314),P=a(9806),T=a(4004),Z=a(529);let M=(()=>{class n{constructor(t){this.httpClient=t}getCatalog(t){return this.httpClient.get(`${P.Z.baseUrl}/catalogs/${t}`).pipe((0,T.U)(o=>{const r=o.products?.map(d=>d.category),s=new Set,l=r.filter((d,p)=>!s.has(d.id)&&(s.add(d.id),!0),new Set);return l.forEach(d=>{d.products=o.products?.filter(p=>p.category?.id===d.id)?.filter(p=>p.isVisible)?.filter(p=>p.isActive)}),{...o,categories:l.filter(d=>d.products.length>0).sort((d,p)=>d.order-p.order)}}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Z.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var S=a(230);function I(n,i){if(1&n&&e._UZ(0,"img",6),2&n){const t=e.oxw();e.s9C("src",t.store.image,e.LSH),e.MGl("alt","Banner of ",t.store.name,"")}}let A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-brand"]],inputs:{store:"store"},decls:8,vars:3,consts:[[1,"brand"],[1,"brand__banner"],["class","brand__banner__image",3,"src","alt",4,"ngIf"],[1,"brand__header"],[1,"brand__header__title"],[1,"brand__header__subtitle"],[1,"brand__banner__image",3,"src","alt"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,I,1,2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4),e._uU(5),e.qZA(),e.TgZ(6,"div",5),e._uU(7),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngIf",o.store.image),e.xp6(3),e.Oqu(o.store.name),e.xp6(2),e.Oqu(o.store.description))},dependencies:[c.O5],styles:[".brand[_ngcontent-%COMP%]{background:#FFFFFF}.brand__header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;padding:1rem}.brand__header__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600}.brand__header__subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#989292}.brand__banner[_ngcontent-%COMP%]{background-color:#f6f6f6;width:100%;height:175px}.brand__banner__image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"]}),n})(),k=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-navbar"]],decls:2,vars:0,consts:[[1,"navbar"],["alt","menu expert icon","src","assets/images/logo.svg",1,"navbar__logo"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.qZA())},styles:[".navbar[_ngcontent-%COMP%]{height:4rem;background-color:#fff;padding:.5rem 1rem;box-sizing:border-box;display:flex;align-items:center;justify-content:space-between}.navbar__logo[_ngcontent-%COMP%]{height:2rem}.navbar__button[_ngcontent-%COMP%]{all:unset}"]}),n})();var F=a(3721),_=a(5861);function J(n,i){if(1&n&&e._UZ(0,"img",7),2&n){const t=e.oxw();e.MGl("alt","Image of ",t.product.title,""),e.s9C("src",t.product.image,e.LSH)}}function B(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.primaryBadge.name," ")}}let U=(()=>{class n{constructor(t,o){this.router=t,this.activatedRoute=o,this.catalogId=this.activatedRoute.snapshot.queryParamMap.get("catalog")||void 0}ngOnInit(){}redirectToDetail(){var t=this;return(0,_.Z)(function*(){yield t.router.navigate([`/detail/${t.product?.id}`],{queryParams:{catalog:t.catalogId}})})()}get primaryBadge(){return this.product.badges?this.product?.badges[0]:null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(g.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-visual-card"]],inputs:{product:"product"},decls:10,vars:7,consts:[[1,"visual-card",3,"click"],[1,"visual-card__resource"],["class","visual-card__resource__image",3,"alt","src",4,"ngIf"],[1,"visual-card__data"],[1,"visual-card__data__title"],[1,"visual-card__data__price"],["class","visual-card__badge",4,"ngIf"],[1,"visual-card__resource__image",3,"alt","src"],[1,"visual-card__badge"],[1,"visual-card__badge__item"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return o.redirectToDetail()}),e.TgZ(1,"div",1),e.YNc(2,J,1,2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4),e._uU(5),e.qZA(),e.TgZ(6,"div",5),e._uU(7),e.ALo(8,"currency"),e.qZA()(),e.YNc(9,B,3,1,"div",6),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",o.product.image),e.xp6(3),e.hij(" ",o.product.title," "),e.xp6(2),e.hij(" ",e.xi3(8,4,o.product.price.amount,o.product.price.currency.code)," "),e.xp6(2),e.Q6J("ngIf",null!=o.primaryBadge))},dependencies:[c.O5,c.H9],styles:[".visual-card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:space-between;border-radius:10px;height:12.0625rem;background-color:#fff}.visual-card__badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;flex-direction:row;gap:.25rem;font-size:12px}.visual-card__badge__item[_ngcontent-%COMP%]{color:#fff;border-radius:0 10px;padding:.2rem .5rem;background-color:#21a300}.visual-card__data[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;gap:.25rem;padding:.5rem;height:4.3125rem}.visual-card__data__title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.visual-card__data__price[_ngcontent-%COMP%]{font-size:12px}.visual-card__resource__image[_ngcontent-%COMP%]{object-fit:cover;border-radius:10px 10px 0 0;height:120px;width:100%}"]}),n})();function N(n,i){if(1&n&&(e.TgZ(0,"div",7),e._UZ(1,"img",8),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.MGl("alt","Image of ",t.product.title,""),e.s9C("src",t.product.image,e.LSH)}}function Q(n,i){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.primaryBadge.name," ")}}let Y=(()=>{class n{constructor(t,o){this.router=t,this.activatedRoute=o,this.catalogId=this.activatedRoute.snapshot.queryParamMap.get("catalog")||void 0}ngOnInit(){}redirectToDetail(){var t=this;return(0,_.Z)(function*(){yield t.router.navigate([`/detail/${t.product?.id}`],{queryParams:{catalog:t.catalogId}})})()}get primaryBadge(){return this.product.badges?this.product?.badges[0]:null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(g.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-simple-card"]],inputs:{product:"product"},decls:11,vars:8,consts:[[1,"simple-card",3,"click"],[1,"simple-card__data"],[1,"simple-card__data__title"],[1,"simple-card__data__price"],[1,"simple-card__data__description"],["class","simple-card__resource",4,"ngIf"],["class","simple-card__badge",4,"ngIf"],[1,"simple-card__resource"],[1,"simple-card__resource__image",3,"alt","src"],[1,"simple-card__badge"],[1,"simple-card__badge__item"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return o.redirectToDetail()}),e.TgZ(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.ALo(6,"currency"),e.qZA(),e.TgZ(7,"div",4),e._uU(8),e.qZA()(),e.YNc(9,N,2,2,"div",5),e.YNc(10,Q,3,1,"div",6),e.qZA()),2&t&&(e.xp6(3),e.hij(" ",o.product.title," "),e.xp6(2),e.hij(" ",e.xi3(6,5,o.product.price.amount,o.product.price.currency.code)," "),e.xp6(3),e.hij(" ",o.product.description," "),e.xp6(1),e.Q6J("ngIf",o.product.image),e.xp6(1),e.Q6J("ngIf",null!=o.primaryBadge))},dependencies:[c.O5,c.H9],styles:[".simple-card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;justify-content:space-between;gap:.25rem;background-color:#fff;border-radius:10px;padding:.5rem}.simple-card__badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;flex-direction:row;gap:.25rem;font-size:12px}.simple-card__badge__item[_ngcontent-%COMP%]{color:#fff;border-radius:0 10px;padding:.2rem .5rem;background-color:#21a300}.simple-card__data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.simple-card__data__title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.simple-card__data__price[_ngcontent-%COMP%]{font-size:12px}.simple-card__data__description[_ngcontent-%COMP%]{font-size:12px;color:#989292;overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.simple-card__resource[_ngcontent-%COMP%]{height:104px;width:104px}.simple-card__resource__image[_ngcontent-%COMP%]{border-radius:10px;height:104px;width:104px;object-fit:cover}.simple-card__resource__no-image[_ngcontent-%COMP%]{background-color:#00000005}"]}),n})();function j(n,i){if(1&n&&(e.ynx(0),e._UZ(1,"app-visual-card",5),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("product",t)}}function z(n,i){if(1&n&&(e.ynx(0),e._UZ(1,"app-simple-card",5),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("product",t)}}function V(n,i){if(1&n&&(e.ynx(0),e.YNc(1,j,2,1,"ng-container",4),e.YNc(2,z,2,1,"ng-container",4),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","VISUAL"===(null==t.category?null:t.category.categoryType)),e.xp6(1),e.Q6J("ngIf","NORMAL"===(null==t.category?null:t.category.categoryType))}}const q=function(n,i){return{section__visual:n,section__normal:i}};let L=(()=>{class n{constructor(){this.type="VISUAL"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-section"]],inputs:{type:"type",category:"category"},decls:5,vars:7,consts:[[1,"section",3,"id"],[1,"section__name"],[3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"product"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,V,3,2,"ng-container",3),e.qZA()()),2&t&&(e.Q6J("id",null==o.category?null:o.category.id),e.xp6(2),e.hij(" ",null==o.category?null:o.category.name," "),e.xp6(1),e.Q6J("ngClass",e.WLB(4,q,"VISUAL"===(null==o.category?null:o.category.categoryType),"NORMAL"===(null==o.category?null:o.category.categoryType))),e.xp6(1),e.Q6J("ngForOf",null==o.category?null:o.category.products))},dependencies:[c.mk,c.sg,c.O5,U,Y],styles:[".section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.section__name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.section__visual[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:.5rem .5rem}.section__normal[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,1fr);grid-gap:.5rem 1rem}"]}),n})();function R(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onClick(s.id))}),e.TgZ(1,"div",3),e._uU(2),e.qZA()()}if(2&n){const t=i.$implicit,o=i.index,r=e.oxw();e.Q6J("ngClass",(null==t?null:t.id)===r.selected||""===r.selected&&0===o?"section-selector__item__line-active":"section-selector__item__line-inactive"),e.xp6(2),e.hij(" ",null==t?null:t.name," ")}}let E=(()=>{class n{constructor(){this.sectionsPosition=[],this.selected=""}ngOnInit(){this.sections&&this.sections[0]&&(this.selected=this?.sections[0]?.id)}ngOnChanges(t){this.sectionsPosition=this.sections?.map(o=>({id:o.id,yValue:document.getElementById(o.id)?.getClientRects()[0].y||0}))||[]}onClick(t){document.getElementById(t)?.scrollIntoView()}detectPosition(){this.sectionsPosition=this.sections?.map(o=>({id:o.id,yValue:window.scrollY+(document.getElementById(o.id)?.getBoundingClientRect().y||0)}))||[],this.sectionsPosition.sort((o,r)=>o.yValue-r.yValue);let[t]=this.sectionsPosition.filter(o=>o.yValue-170<window.scrollY).slice(-1);t||([t]=this.sectionsPosition.slice(0,1)),this.selected=t.id||""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-section-selector"]],hostBindings:function(t,o){1&t&&e.NdJ("scroll",function(s){return o.detectPosition(s)},!1,e.Jf7)},inputs:{sections:"sections"},features:[e.TTD],decls:2,vars:1,consts:[[1,"section-selector"],["class","section-selector__item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"section-selector__item",3,"ngClass","click"],[1,"section-selector__item__name"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,R,3,2,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.sections))},dependencies:[c.mk,c.sg],styles:[".section-selector[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.section-selector[_ngcontent-%COMP%]{z-index:999999;padding:0 1rem;background-color:#fff;position:sticky;top:0;display:flex;flex-direction:row;overflow:hidden;overflow-x:scroll;-ms-overflow-style:none}.section-selector__item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:3.25rem;border-bottom:5px solid black;white-space:nowrap}.section-selector__item__name[_ngcontent-%COMP%]{padding:0 1rem}.section-selector__item__line-active[_ngcontent-%COMP%]{border-bottom:5px solid #000000}.section-selector__item__line-inactive[_ngcontent-%COMP%]{border-bottom:5px solid #E2E2E2}"]}),n})();function $(n,i){1&n&&e._UZ(0,"app-section",5),2&n&&e.Q6J("category",i.$implicit)}let H=(()=>{class n{constructor(t,o,r,s,l){this.router=t,this.cartService=o,this.menuService=r,this.storeService=s,this.activatedRoute=l,this.catalogId=this.activatedRoute.snapshot.queryParamMap.get("catalog")||void 0,this.storeId=this.activatedRoute.snapshot.queryParamMap.get("store")||void 0,this.catalog={id:"",name:"",categories:[],products:[]},this.store={id:"",name:"",description:"",image:void 0}}ngOnInit(){(function O(...n){const i=(0,b.jO)(n),t=function C(n){return 1===n.length&&v(n[0])?n[0]:n}(n);return t.length?new f.y(o=>{let r=t.map(()=>[]),s=t.map(()=>!1);o.add(()=>{r=s=null});for(let l=0;!o.closed&&l<t.length;l++)(0,h.Xf)(t[l]).subscribe((0,x.x)(o,d=>{if(r[l].push(d),r.every(p=>p.length)){const p=r.map(u=>u.shift());o.next(i?i(...p):p),r.some((u,K)=>!u.length&&s[K])&&o.complete()}},()=>{s[l]=!0,!r[l].length&&o.complete()}));return()=>{r=s=null}}):y.E})(this.menuService.getCatalog(this.catalogId||""),this.storeService.getStoreById(this.storeId||"")).subscribe({next:([t,o])=>{this.catalog=t,this.store=o},error:t=>{this.router.navigate(["not-found"])}})}viewCart(){this.router.navigate([`/cart/${this.cartService.getCartId(this.catalogId)}`],{queryParams:{menuId:this.catalog.id}})}get hiddenCart(){return!this.store.cartEnabled||0===this.cartService.getItems(this.catalogId).length}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(w.N),e.Y36(M),e.Y36(S.d),e.Y36(g.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-catalog"]],decls:6,vars:6,consts:[[3,"store"],[3,"sections"],[1,"catalog",3,"ngClass"],[3,"category",4,"ngFor","ngForOf"],["subtitle","Ver pedido",3,"hidden","title","click"],[3,"category"]],template:function(t,o){1&t&&(e._UZ(0,"app-navbar")(1,"app-brand",0)(2,"app-section-selector",1),e.TgZ(3,"div",2),e.YNc(4,$,1,1,"app-section",3),e.qZA(),e.TgZ(5,"app-floating-button",4),e.NdJ("click",function(){return o.viewCart()}),e.qZA()),2&t&&(e.xp6(1),e.Q6J("store",o.store),e.xp6(1),e.Q6J("sections",o.catalog.categories),e.xp6(1),e.Q6J("ngClass",o.hiddenCart?"catalog__none-white-space":"catalog__white-space"),e.xp6(1),e.Q6J("ngForOf",o.catalog.categories),e.xp6(1),e.s9C("title",o.store.name),e.Q6J("hidden",o.hiddenCart))},dependencies:[c.mk,c.sg,A,k,F.w,L,E],styles:[".catalog[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.catalog__white-space[_ngcontent-%COMP%]{margin:1rem 1rem 5.5rem}.catalog__none-white-space[_ngcontent-%COMP%]{margin:1rem}"]}),n})();var X=a(4065);const G=[{path:":catalogId",component:H}];let D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,g.Bz.forChild(G),X.m]}),n})()}}]);