"use strict";(self.webpackChunkmenuexpert_front=self.webpackChunkmenuexpert_front||[]).push([[121],{4121:(U,u,c)=>{c.r(u),c.d(u,{CheckoutModule:()=>w});var a=c(6895),l=c(6962),t=c(4650),h=c(9806),f=c(529);let y=(()=>{class n{constructor(e){this.httpClient=e}postCheckout(e,o,i){return this.httpClient.post(`${h.Z.baseUrl}/checkout`,{cartId:e,items:o,tip:i})}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(f.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var m=c(9314),d=c(1844),v=c(3721),_=c(495);function C(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t._UZ(2,"img",6),t.TgZ(3,"div",7),t._uU(4),t.qZA()(),t.TgZ(5,"div",8)(6,"mat-radio-button",9),t.NdJ("change",function(){const p=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onChange(p))}),t.qZA()()()}if(2&n){const e=s.$implicit,o=s.index;t.xp6(2),t.s9C("src",e.icon,t.LSH),t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("checked",0==o)("value",e.id)}}let T=(()=>{class n{constructor(){this.paymentTypeEvent=new t.vpe,this.paymentTypes=[{id:"1",name:"Efectivo",icon:"assets/icons/efectivo.png"},{id:"2",name:"Mercadopago",icon:"assets/icons/mercado-pago.png"}]}onChange(e){this.paymentTypeEvent.emit(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-payments-selector"]],outputs:{paymentTypeEvent:"paymentTypeEvent"},decls:6,vars:1,consts:[[1,"payments-selector"],[1,"payments-selector__title"],[1,"payments-selector__options"],["class","payments-selector__options__item  payments-selector__options__divider",4,"ngFor","ngForOf"],[1,"payments-selector__options__item","payments-selector__options__divider"],[1,"payments-selector__options__item__group"],[1,"payments-selector__options__item__group__icon",3,"src"],[1,"payments-selector__options__item__group__name"],[1,"payments-selector__options__item__field"],["color","primary",3,"checked","value","change"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," Medios de pago "),t.qZA(),t.TgZ(3,"div",2)(4,"mat-radio-group"),t.YNc(5,C,7,4,"div",3),t.qZA()()()),2&o&&(t.xp6(5),t.Q6J("ngForOf",i.paymentTypes))},dependencies:[a.sg,_.VQ,_.U0],styles:[".payments-selector[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;background:#FFFFFF}.payments-selector__title[_ngcontent-%COMP%]{font-weight:600}.payments-selector__options[_ngcontent-%COMP%]{display:flex;flex-direction:column}.payments-selector__options__divider[_ngcontent-%COMP%]:not(:last-child){border-bottom:#EBEBEB solid 1px}.payments-selector__options__item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:.75rem}.payments-selector__options__item__group[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem}.payments-selector__options__item__group__icon[_ngcontent-%COMP%]{object-fit:cover;width:20px;height:20px}"]})}return n})();const b=function(n,s){return{"tips-selector__options__button__black":n,"tips-selector__options__button__gray":s}};function x(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){const p=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onChange(p))}),t._uU(1),t.ALo(2,"currency"),t.qZA()}if(2&n){const e=s.$implicit,o=t.oxw();t.Q6J("ngClass",t.WLB(5,b,e===o.selectedTip,e!==o.selectedTip)),t.xp6(1),t.hij(" ",0===e.price.amount?"Ahora no":t.xi3(2,2,e.price.amount,e.price.currency.code)," ")}}let Z=(()=>{class n{constructor(){this.tipsTypes=[{price:{amount:0,currency:{code:"EUR",symbol:"",name:"Euro"}}},{price:{amount:1,currency:{code:"EUR",symbol:"",name:"Euro"}}},{price:{amount:2,currency:{code:"EUR",symbol:"",name:"Euro"}}},{price:{amount:3,currency:{code:"EUR",symbol:"",name:"Euro"}}},{price:{amount:4,currency:{code:"EUR",symbol:"",name:"Euro"}}}],this.selectedTip=this.tipsTypes[0],this.amountEvent=new t.vpe}onChange(e){this.selectedTip=e,this.amountEvent.emit(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-tips-selector"]],outputs:{amountEvent:"amountEvent"},decls:5,vars:1,consts:[[1,"tips-selector"],[1,"tips-selector__title"],[1,"tips-selector__options"],["class","tips-selector__options__button",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tips-selector__options__button",3,"ngClass","click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," Propina para el mozo "),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,x,3,8,"button",3),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("ngForOf",i.tipsTypes))},dependencies:[a.mk,a.sg,a.H9],styles:[".tips-selector[_ngcontent-%COMP%]{padding:1rem;background:#FFFFFF}.tips-selector__title[_ngcontent-%COMP%]{font-weight:600}.tips-selector__options[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem;padding:1rem 0 .5rem;overflow:hidden;overflow-x:auto;-ms-overflow-style:none}.tips-selector__options__button[_ngcontent-%COMP%]{all:unset;border-radius:100px;padding:.25rem .75rem;background:#CECECE;font-size:.75rem}.tips-selector__options__button__black[_ngcontent-%COMP%]{background:#000000;color:#fff}.tips-selector__options__button__gray[_ngcontent-%COMP%]{background:#CECECE;color:#000}"]})}return n})(),E=(()=>{class n{constructor(e,o){this.cartService=e,this.activatedRoute=o,this.tip={price:{amount:0,currency:{code:"",symbol:"",name:""}}},this.catalogId=this.activatedRoute.snapshot.queryParamMap.get("catalog")||void 0}get productsAmount(){return this.cartService.getTotal(this.catalogId)}get currency(){return this.cartService.getCurrency(this.catalogId)}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(m.N),t.Y36(l.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-resume"]],inputs:{tip:"tip"},decls:22,vars:12,consts:[[1,"resume"],[1,"resume__title"],[1,"resume__detail"],[1,"resume__detail__item"],[1,"resume__total"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," Resumen "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div"),t._uU(6," Productos "),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"currency"),t.qZA()(),t.TgZ(10,"div",3)(11,"div"),t._uU(12," Propina "),t.qZA(),t.TgZ(13,"div"),t._uU(14),t.ALo(15,"currency"),t.qZA()()(),t.TgZ(16,"div",4)(17,"div"),t._uU(18," Total "),t.qZA(),t.TgZ(19,"div"),t._uU(20),t.ALo(21,"currency"),t.qZA()()()),2&o&&(t.xp6(8),t.hij(" ",t.xi3(9,3,i.productsAmount,i.currency)," "),t.xp6(6),t.hij(" ",t.xi3(15,6,i.tip.price.amount,i.tip.price.currency.code)," "),t.xp6(6),t.hij(" ",t.xi3(21,9,i.productsAmount+i.tip.price.amount,i.currency)," "))},dependencies:[a.H9],styles:[".resume[_ngcontent-%COMP%]{padding:1rem;background:#FFFFFF}.resume__title[_ngcontent-%COMP%]{font-weight:600}.resume__detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-top:1rem;gap:.25rem}.resume__detail__item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;font-size:.75rem}.resume__detail__item[_ngcontent-%COMP%]:last-child{padding-bottom:.5rem;border-bottom:#EBEBEB solid 1px}.resume__total[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;font-size:1rem;padding-top:.5rem;font-weight:600}"]})}return n})();function F(n,s){1&n&&t._UZ(0,"app-floating-button",11)}function k(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-floating-button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.goToMercadoPago())}),t.qZA()}}let O=(()=>{class n{constructor(e,o,i){this.activatedRoute=e,this.checkoutService=o,this.cartService=i,this.cartId=this.activatedRoute.snapshot.paramMap.get("cartId")||void 0,this.menuId=this.activatedRoute.snapshot.queryParamMap.get("menuId")||void 0,this.tip={price:{amount:0,currency:""}},this.paymentType={id:"1"}}changeTip(e){this.tip=e}goToMercadoPago(){this.checkoutService.postCheckout(this.cartId||"",this.cartService.getRawItems(this.menuId),this.tip).subscribe({next:e=>{window.location.href=e.initPoint}})}paymentTypeEvent(e){this.paymentType=e}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(l.gz),t.Y36(y),t.Y36(m.N))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-checkout"]],decls:14,vars:3,consts:[[1,"checkout"],[1,"checkout__holder"],[1,"checkout__cards"],[1,"checkout__cards__header"],[1,"checkout__cards__header__title"],[1,"checkout__cards__header__subtitle"],[3,"paymentTypeEvent"],[3,"amountEvent"],[3,"tip"],["title","llamar al mozo",4,"ngIf"],["title","ir a mercadopago",3,"click",4,"ngIf"],["title","llamar al mozo"],["title","ir a mercadopago",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-navigator")(2,"div",1),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4),t._uU(6," Checkout "),t.qZA(),t.TgZ(7,"div",5),t._uU(8," Kebab Madrid "),t.qZA()(),t.TgZ(9,"app-payments-selector",6),t.NdJ("paymentTypeEvent",function(r){return i.paymentTypeEvent(r)}),t.qZA(),t.TgZ(10,"app-tips-selector",7),t.NdJ("amountEvent",function(r){return i.changeTip(r)}),t.qZA(),t._UZ(11,"app-resume",8),t.qZA(),t.YNc(12,F,1,0,"app-floating-button",9),t.YNc(13,k,1,0,"app-floating-button",10),t.qZA()),2&o&&(t.xp6(11),t.Q6J("tip",i.tip),t.xp6(1),t.Q6J("ngIf","1"==i.paymentType.id),t.xp6(1),t.Q6J("ngIf","2"==i.paymentType.id))},dependencies:[a.O5,d.S,v.w,T,Z,E],styles:[".checkout[_ngcontent-%COMP%]{display:flex;flex-direction:column}.checkout__holder[_ngcontent-%COMP%]{background:#FFFFFF;height:3.75rem}.checkout__cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.checkout__cards__header[_ngcontent-%COMP%]{padding:1rem;background-color:#fff}.checkout__cards__header__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600}"]})}return n})();var g=c(7392);let P=(()=>{class n{constructor(e){this.activatedRoute=e,this.availableTypes={success:{color:"#28a745",subtitle:"Felicitaciones, su pedido ya esta en proceso",title:"PEDIDO EXITOSO",icon:"done"},error:{color:"#dc3545",subtitle:"Algo salio mal en el checkout. Reintente mas tarde!",title:"PEDIDO ERRONEO",icon:"close"},default:{color:"#dc3545",subtitle:"Algo salio mal en el checkout. \nReintente mas tarde!",title:"PEDIDO ERRONEO",icon:"close"}},this.availableType=this.availableTypes.default,this.status=this.activatedRoute.snapshot.queryParamMap.get("status")}ngOnInit(){null!==this.status&&this.availableTypes[this.status]&&(this.availableType=this.availableTypes[this.status])}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(l.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-confirmation"]],decls:10,vars:6,consts:[[1,"confirmation"],[1,"confirmation__logo"],[1,"confirmation__data"],[1,"confirmation__data__title"],[1,"confirmation__data__subtitle"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-navigator"),t.TgZ(2,"div",1)(3,"mat-icon"),t._uU(4),t.qZA()(),t.TgZ(5,"div",2)(6,"div",3),t._uU(7),t.qZA(),t.TgZ(8,"div",4),t._uU(9),t.qZA()()()),2&o&&(t.Jzz("background-color: ",i.availableType.color,""),t.xp6(4),t.Oqu(i.availableType.icon),t.xp6(3),t.hij(" ",i.availableType.title," "),t.xp6(2),t.hij(" ",i.availableType.subtitle," "))},dependencies:[d.S,g.Hw],styles:[".confirmation[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:2rem;align-items:center;height:100vh;color:#fff;background-color:#dc3545}.confirmation__logo[_ngcontent-%COMP%]{color:#fff;border-radius:100%;border:solid 5px #FFFFFF;display:flex;justify-content:center;align-items:center;width:75px;height:75px}.confirmation__data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;justify-content:center;align-items:center}.confirmation__data__title[_ngcontent-%COMP%]{font-weight:600;font-size:1.5rem}.confirmation__data__subtitle[_ngcontent-%COMP%]{text-align:center;width:75%;color:#fff}"]})}return n})();var M=c(5621);const A=[{path:":id",component:O},{path:":id/confirmation",component:P}];let w=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[a.ez,l.Bz.forChild(A),M.m,g.Ps,_.Fk]})}return n})()}}]);