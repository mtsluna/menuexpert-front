"use strict";(self.webpackChunkshopexpert_front=self.webpackChunkshopexpert_front||[]).push([[812],{812:(lt,v,a)=>{a.r(v),a.d(v,{DetailModule:()=>st});var s=a(177),g=a(52),b=a(467),t=a(4438),l=a(9417),G=a(8399),F=a(1028),k=a(6354),R=a(1626);let $=(()=>{class n{constructor(e){this.httpClient=e}getProduct(e,o){return this.httpClient.get(`${F.A.baseUrl}/products/${o}`).pipe((0,k.T)(i=>(i.customizations?.forEach(r=>{r.options.sort((d,p)=>d.price.amount-p.price.amount)}),i)))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(R.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var M=a(573),P=a(6978),E=a(667),S=a(4963),y=a(9213),j=a(8834),u=a(9170);let C=(()=>{class n{constructor(e){this.modalGalleryService=e,this.images=[]}open(){this.images.length<=0||this.modalGalleryService.open({id:1,images:this.images.map((e,o)=>new u._V(o,{img:e})),currentImage:new u._V(0,{img:this.images[0]}),libConfig:{currentImageConfig:{description:{strategy:u.ms.ALWAYS_HIDDEN}}}})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(u.H8))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-gallery-viewer"]],inputs:{images:"images"},standalone:!0,features:[t.aNF],decls:4,vars:0,consts:[[1,"gallery-viewer"],["mat-mini-fab","","color","accent",3,"click"],["color","primary",1,"gallery-viewer__button__icon"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"button",1),t.bIt("click",function(){return i.open()}),t.j41(2,"mat-icon",2),t.EFF(3,"open_in_full"),t.k0s()()())},dependencies:[y.An,j.$0],styles:[".gallery-viewer[_ngcontent-%COMP%]{position:fixed;top:1rem;right:4rem;z-index:99999}.gallery-viewer__button__icon[_ngcontent-%COMP%]{transform:scale(.8)}"]})}}return n})();function Y(n,c){if(1&n&&t.nrm(0,"img",2),2&n){const e=t.XpG();t.FS9("src",e.product.image,t.B4B),t.Mz_("alt","photo of the product: ",e.product.title,"")}}function B(n,c){1&n&&t.nrm(0,"div",3)}let T=(()=>{class n{constructor(){}ngOnInit(){}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-image"]],inputs:{product:"product"},decls:2,vars:2,consts:[["class","image",3,"src","alt",4,"ngIf"],["class","image image__empty",4,"ngIf"],[1,"image",3,"src","alt"],[1,"image","image__empty"]],template:function(o,i){1&o&&t.DNE(0,Y,1,3,"img",0)(1,B,1,0,"div",1),2&o&&(t.Y8G("ngIf",i.product.image),t.R7$(),t.Y8G("ngIf",!i.product.image))},dependencies:[s.bT],styles:[".image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image__empty[_ngcontent-%COMP%]{background-color:#fff;height:3.5rem}"]})}}return n})();function z(n,c){if(1&n&&(t.j41(0,"span",7),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(t.i5U(2,1,e.product.price.amount,e.product.price.currency.code))}}function D(n,c){if(1&n&&(t.j41(0,"div",8),t.EFF(1),t.k0s()),2&n){const e=c.$implicit;t.R7$(),t.SpI(" ",e.name," ")}}let w=(()=>{class n{constructor(){}ngOnInit(){}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-banner"]],inputs:{product:"product"},decls:11,vars:8,consts:[[1,"banner"],[1,"banner__data__title"],[1,"banner__data__price"],["class","banner__data__price__discount",4,"ngIf"],[1,"banner__data__description"],[1,"banner__data__badges"],["class","banner__data__badges__item",4,"ngFor","ngForOf"],[1,"banner__data__price__discount"],[1,"banner__data__badges__item"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2),t.k0s(),t.j41(3,"div",2),t.EFF(4),t.nI1(5,"currency"),t.DNE(6,z,3,4,"span",3),t.k0s(),t.j41(7,"div",4),t.EFF(8),t.k0s(),t.j41(9,"div",5),t.DNE(10,D,2,1,"div",6),t.k0s()()),2&o&&(t.R7$(2),t.SpI(" ",i.product.title," "),t.R7$(2),t.SpI(" ",t.i5U(5,5,i.product.price.amount-(i.product.price.discount||0),i.product.price.currency.code)," "),t.R7$(2),t.Y8G("ngIf",i.product.price.discount&&i.product.price.discount>0),t.R7$(2),t.SpI(" ",i.product.description," "),t.R7$(2),t.Y8G("ngForOf",i.product.badges))},dependencies:[s.Sq,s.bT,s.oe],styles:[".banner[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;display:flex;flex-direction:column;gap:.25rem}.banner__image[_ngcontent-%COMP%]{width:100%}.banner__data__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600}.banner__data__price[_ngcontent-%COMP%]{font-size:1rem;color:#363636;font-weight:550}.banner__data__price__discount[_ngcontent-%COMP%]{color:#989292;font-size:12px;font-weight:400;text-decoration:line-through}.banner__data__description[_ngcontent-%COMP%]{padding:.5rem 0;font-size:.75rem;color:#989292}.banner__data__badges[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.25rem;font-size:12px}.banner__data__badges__item[_ngcontent-%COMP%]{color:#fff;border-radius:10px;padding:.2rem .5rem;background-color:#21a300}"]})}}return n})();var V=a(8387);let X=(()=>{class n{constructor(e){this.formBuilder=e,this.form=this.formBuilder.group({comment:[""],quantity:[1]})}ngOnInit(){}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(l.ok))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-observation"]],inputs:{form:"form"},decls:8,vars:2,consts:[[1,"observation",3,"formGroup"],[1,"observation__header__title"],[1,"observation__header__subtitle"],["formControlName","comment","rows","3",1,"observation__content"],[3,"form"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div")(2,"div",1),t.EFF(3," Observaciones "),t.k0s(),t.j41(4,"div",2),t.EFF(5," Escriba aqui cualquier aclaraci\xf3n. "),t.k0s()(),t.nrm(6,"textarea",3)(7,"app-quantity-selector",4),t.k0s()),2&o&&(t.Y8G("formGroup",i.form),t.R7$(7),t.Y8G("form",i.form))},dependencies:[V.U,l.me,l.BC,l.cb,l.j4,l.JD],styles:[".observation[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;padding:1rem;gap:1rem}.observation__header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.observation__header__title[_ngcontent-%COMP%]{font-size:1rem}.observation__header__subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#989292}.observation__content[_ngcontent-%COMP%]{resize:none;width:100%;box-sizing:border-box;background-color:#f6f6f6;border-radius:10px;padding:.5rem;border:none}.observation__content[_ngcontent-%COMP%]:focus{outline:2px solid #000000!important}"]})}}return n})();var I=a(2765),h=a(5951);const x=n=>({"option-selector__options__item__name__disabled":n}),O=n=>({"option-selector__options__item__not-display":n});function N(n,c){1&n&&(t.j41(0,"span",14),t.EFF(1,"\xa0\xb7 No disponible"),t.k0s())}function U(n,c){if(1&n&&(t.j41(0,"div",15),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" + ",t.i5U(2,1,e.price.amount,null==e||null==e.price||null==e.price.currency?null:e.price.currency.code)," ")}}function A(n,c){if(1&n&&(t.j41(0,"div",8)(1,"div")(2,"div",9),t.EFF(3),t.DNE(4,N,2,0,"span",10),t.k0s(),t.DNE(5,U,3,4,"div",11),t.k0s(),t.j41(6,"div",12),t.nrm(7,"mat-radio-button",13),t.k0s()()),2&n){const e=c.$implicit,o=c.index,i=t.XpG(2);t.R7$(2),t.Y8G("ngClass",t.eq3(8,x,!e.isActive)),t.R7$(),t.SpI(" ",null==e?null:e.title,""),t.R7$(),t.Y8G("ngIf",!e.isActive),t.R7$(),t.Y8G("ngIf",0!==(null==e||null==e.price?null:e.price.amount)&&e.isActive),t.R7$(),t.Y8G("ngClass",t.eq3(10,O,i.enabled)),t.R7$(),t.Y8G("disabled",!e.isActive)("checked",i.getChecked(o))("value",i.makeProduct(o,e))}}function J(n,c){if(1&n&&(t.j41(0,"div",5)(1,"mat-radio-group",6),t.DNE(2,A,8,12,"div",7),t.k0s()()),2&n){const e=t.XpG();t.Y8G("formGroup",e.form),t.R7$(2),t.Y8G("ngForOf",null==e.customization?null:e.customization.options)}}function H(n,c){1&n&&(t.j41(0,"span",14),t.EFF(1,"\xa0\xb7 No disponible"),t.k0s())}function L(n,c){if(1&n&&(t.j41(0,"div",15),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" + ",t.i5U(2,1,e.price.amount,null==e||null==e.price||null==e.price.currency?null:e.price.currency.code)," ")}}function W(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",8)(1,"div")(2,"div",9),t.EFF(3),t.DNE(4,H,2,0,"span",10),t.k0s(),t.DNE(5,L,3,4,"div",11),t.k0s(),t.j41(6,"div",12)(7,"mat-checkbox",17),t.bIt("change",function(i){const r=t.eBV(e),d=r.$implicit,p=r.index,m=t.XpG(2);return t.Njj(m.changePick(i,p,d))}),t.k0s()()()}if(2&n){const e=c.$implicit,o=c.index,i=t.XpG(2);t.R7$(2),t.Y8G("ngClass",t.eq3(6,x,!e.isActive)),t.R7$(),t.SpI(" ",null==e?null:e.title,""),t.R7$(),t.Y8G("ngIf",!e.isActive),t.R7$(),t.Y8G("ngIf",0!==(null==e||null==e.price?null:e.price.amount)&&e.isActive),t.R7$(),t.Y8G("ngClass",t.eq3(8,O,i.enabled)),t.R7$(),t.Y8G("formControlName",o)}}function K(n,c){if(1&n&&(t.j41(0,"div",5),t.qex(1,16),t.DNE(2,W,8,10,"div",7),t.bVm(),t.k0s()),2&n){const e=t.XpG();t.Y8G("formGroup",e.form),t.R7$(2),t.Y8G("ngForOf",null==e.customization?null:e.customization.options)}}let Q=(()=>{class n{constructor(){}ngOnInit(){}changePick(e,o,i){const r=this.form.get("selected"),d=!!e.checked&&i;r.at(o).setValue(d);const p=r.getRawValue(),m=p.filter(_=>0!=_).length;p.forEach((_,f)=>{!1===_||_.isActive?m==this.customization.max&&0==_||!this.customization.options[f].isActive?r.at(f).disable():r.at(f).enable():r.at(f).disable()})}makeProduct(e,o){return this.customization?.options.map((i,r)=>r===e&&o)}getChecked(e){return this.form.getRawValue().selected.findIndex(o=>0!=o)===e}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-option-selector"]],inputs:{customization:"customization",form:"form",enabled:"enabled"},decls:8,vars:4,consts:[[1,"option-selector"],[1,"option-selector__header"],[1,"option-selector__header__title"],[1,"option-selector__header__description"],["class","option-selector__options",3,"formGroup",4,"ngIf"],[1,"option-selector__options",3,"formGroup"],["formControlName","selected"],["class","option-selector__options__item  option-selector__options__divider",4,"ngFor","ngForOf"],[1,"option-selector__options__item","option-selector__options__divider"],[1,"option-selector__options__item__name",3,"ngClass"],["class","option-selector__options__item__name__disabled__tag",4,"ngIf"],["class","option-selector__options__item__price",4,"ngIf"],[1,"option-selector__options__item__field",3,"ngClass"],["color","primary",3,"disabled","checked","value"],[1,"option-selector__options__item__name__disabled__tag"],[1,"option-selector__options__item__price"],["formArrayName","selected"],["color","primary",3,"change","formControlName"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"div",3),t.EFF(5),t.k0s()(),t.DNE(6,J,3,2,"div",4)(7,K,3,2,"div",4),t.k0s()),2&o&&(t.R7$(3),t.SpI(" ",i.customization.name," "),t.R7$(2),t.SpI(" Elige hasta ",i.customization.max," "),t.R7$(),t.Y8G("ngIf",1===i.customization.max),t.R7$(),t.Y8G("ngIf",i.customization.max>1))},dependencies:[s.YU,s.Sq,s.bT,I.So,l.BC,l.cb,l.j4,l.JD,l.v8,h.VT,h._g,s.oe],styles:[".option-selector[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:column;padding:1rem;gap:.5rem}.option-selector__header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.option-selector__header__title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.option-selector__header__description[_ngcontent-%COMP%]{font-size:.75rem;color:#989292}.option-selector__options[_ngcontent-%COMP%]{display:flex;flex-direction:column}.option-selector__options__divider[_ngcontent-%COMP%]:not(:last-child){border-bottom:#EBEBEB solid 1px}.option-selector__options__item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:.75rem}.option-selector__options__item__name__disabled[_ngcontent-%COMP%]{color:#626262;text-decoration:line-through}.option-selector__options__item__name__disabled__tag[_ngcontent-%COMP%]{text-decoration:none;display:inline-block}.option-selector__options__item__price[_ngcontent-%COMP%]{color:#626262}.option-selector__options__item__price__disabled[_ngcontent-%COMP%]{color:#626262;text-decoration:line-through}.option-selector__options__item__not-display[_ngcontent-%COMP%]{visibility:hidden}"]})}}return n})();const Z=n=>[n],q=()=>[];function tt(n,c){1&n&&t.nrm(0,"div",12)}function et(n,c){if(1&n&&t.nrm(0,"app-option-selector",13),2&n){const e=c.$implicit,o=c.index,i=t.XpG(2);t.Y8G("form",i.getFormElement(o))("enabled",!i.store.cartEnabled)("customization",e)}}function nt(n,c){if(1&n){const e=t.RV6();t.j41(0,"app-floating-button",14),t.nI1(1,"currency"),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.addItem())}),t.k0s()}if(2&n){const e=t.XpG(2);t.Mz_("title","agregar al pedido \xb7 ",t.i5U(1,3,e.price,e.product.price.currency.code),""),t.Y8G("hidden",!e.store.cartEnabled)}}function ot(n,c){if(1&n){const e=t.RV6();t.j41(0,"app-floating-button",14),t.nI1(1,"currency"),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.updateItem())}),t.k0s()}if(2&n){const e=t.XpG(2);t.Mz_("title","modificar pedido \xb7 ",t.i5U(1,3,e.price,e.product.price.currency.code),""),t.Y8G("hidden",!e.store.cartEnabled)}}function it(n,c){if(1&n&&(t.qex(0),t.j41(1,"div",4),t.nrm(2,"app-image",5),t.DNE(3,tt,1,0,"div",6),t.j41(4,"div",7),t.nrm(5,"app-banner",8),t.DNE(6,et,1,3,"app-option-selector",9),t.nrm(7,"app-observation",10),t.DNE(8,nt,2,6,"app-floating-button",11)(9,ot,2,6,"app-floating-button",11),t.k0s()(),t.bVm()),2&n){const e=t.XpG();t.R7$(2),t.Y8G("product",e.product),t.R7$(),t.Y8G("ngIf",!e.product.image),t.R7$(2),t.Y8G("product",e.product),t.R7$(),t.Y8G("ngForOf",e.product.customizations),t.R7$(),t.Y8G("hidden",!e.store.cartEnabled)("form",e.form),t.R7$(),t.Y8G("ngIf",!e.cartItem),t.R7$(),t.Y8G("ngIf",e.cartItem)}}let rt=(()=>{class n{constructor(e,o,i,r,d,p,m,_){this.formBuilder=e,this.cartService=o,this.router=i,this.activatedRoute=r,this.productService=d,this.storeService=p,this.location=m,this.analytics=_,this.form=this.formBuilder.group({quantity:[1],product:null,comment:[""],selections:[]}),this.error=!1,this.catalogId=localStorage.getItem("catalogId")||void 0,this.productId=this.activatedRoute.snapshot.paramMap.get("productId")||void 0,this.cartItem=this.activatedRoute.snapshot.queryParamMap.get("cartItem")||void 0,this.store={},this.product={id:"",title:"",price:{discount:0,amount:0,currency:{code:"",name:"",symbol:""}},description:"",badges:[],image:"",customizations:[]},this.analytics.logEvent("detail_view",{catalogId:this.catalogId,productId:this.productId})}ngOnInit(){if(this.store=this.storeService.getStoreFromLocalStorage(),this.catalogId&&this.productId)if(this.cartItem){const e=this.cartService.getItem(this.cartItem,this.catalogId);e.product&&(this.product=e.product),this.form=this.initForm(),this.form.patchValue(e)}else this.productService.getProduct(this.catalogId,this.productId).subscribe({next:e=>{this.product=e,this.form=this.initForm()},error:()=>{this.router.navigate(["not-found"])}})}initForm(){const e=o=>1===o.max?{selected:this.formBuilder.control({value:o.options.map((i,r)=>1===o.max&&r===o.options.map(d=>d.isActive).indexOf(!0)&&i),disabled:!1})}:{selected:this.formBuilder.array(o.options.map((i,r)=>this.formBuilder.control({value:1===o.max&&0==r&&i,disabled:!i.isActive})))};return this.formBuilder.group({id:"",quantity:[1],product:this.product,comment:[""],selections:this.formBuilder.array(this.product?.customizations?.map(o=>this.formBuilder.group({id:[o?.id],...e(o)}))||[])})}getFormElement(e){return this.form.get("selections").at(e)}addItem(){var e=this;return(0,b.A)(function*(){yield e.cartService.addItem(e.form.getRawValue(),e.catalogId),e.location.back()})()}updateItem(){var e=this;return(0,b.A)(function*(){yield e.cartService.updateItem(e.form.getRawValue()),e.location.back()})()}get price(){const e=this.form.getRawValue(),o=e?.selections?.map(i=>i.selected.filter(r=>!1!==r).map(r=>r.price).reduce((r,d)=>r+d.amount-(d.discount||0),0)).reduce((i,r)=>i+r,0);return(this.product.price.amount-(this.product.price.discount||0)+o)*e.quantity}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(l.ok),t.rXU(G.m),t.rXU(g.Ix),t.rXU(g.nX),t.rXU($),t.rXU(M.n),t.rXU(s.aZ),t.rXU(P.f_))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-detail"]],decls:5,vars:5,consts:[[1,"detail"],[3,"images"],[1,"detail__holder"],[4,"ngIf"],[1,"detail__layout"],[1,"detail__image",3,"product"],["class","detail__image__empty",4,"ngIf"],[1,"detail__content"],[3,"product"],[3,"form","enabled","customization",4,"ngFor","ngForOf"],[3,"hidden","form"],[3,"hidden","title","click",4,"ngIf"],[1,"detail__image__empty"],[3,"form","enabled","customization"],[3,"click","hidden","title"]],template:function(o,i){1&o&&(t.j41(0,"div",0),t.nrm(1,"app-navigator")(2,"app-gallery-viewer",1)(3,"div",2),t.DNE(4,it,10,8,"ng-container",3),t.k0s()),2&o&&(t.R7$(2),t.Y8G("images",i.product.image?t.eq3(2,Z,i.product.image):t.lJ4(4,q)),t.R7$(2),t.Y8G("ngIf",!i.error))},dependencies:[s.Sq,s.bT,E.d,S.g,C,T,w,X,Q,s.oe],styles:[".detail[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;flex-direction:column;margin-bottom:5rem}@media (min-width: 1024px){.detail[_ngcontent-%COMP%]{height:calc(100vh - 5rem)}}.detail__layout[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;margin-bottom:5rem;width:100%;height:100%;background-color:#fff}@media (min-width: 1024px){.detail__layout[_ngcontent-%COMP%]{flex-direction:row;width:60%;border-radius:10px;overflow:hidden}}@media (min-width: 1024px){.detail__holder[_ngcontent-%COMP%]{background:#fff;height:3.75rem}}.detail__image[_ngcontent-%COMP%]{height:inherit;object-fit:cover!important}@media (min-width: 1024px){.detail__image[_ngcontent-%COMP%]{width:50%}}.detail__image__empty[_ngcontent-%COMP%]{background-color:#fff;height:inherit}.detail__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}@media (min-width: 1024px){.detail__content[_ngcontent-%COMP%]{width:50%}}"]})}}return n})();var ct=a(2334);const at=[{path:":productId",component:rt}];let st=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[s.MD,g.iI.forChild(at),ct.G,y.m_,I.g7,l.X1,h.Wk,C]})}}return n})()}}]);