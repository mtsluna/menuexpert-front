"use strict";(self.webpackChunkmenuexpert_front=self.webpackChunkmenuexpert_front||[]).push([[278],{3278:(ot,h,a)=>{a.r(h),a.d(h,{DetailModule:()=>et});var s=a(6895),f=a(2510),t=a(4650),p=a(4006),C=a(9314),y=a(9806),O=a(4004),Z=a(529);let I=(()=>{class o{constructor(e){this.httpClient=e}getProduct(e,n){return this.httpClient.get(`${y.Z.baseUrl}/products/${n}`).pipe((0,O.U)(i=>(i.customizations?.forEach(c=>{c.options.sort((l,_)=>l.price.amount-_.price.amount)}),i)))}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var A=a(230),T=a(1844),J=a(3721);function M(o,r){if(1&o&&t._UZ(0,"img",2),2&o){const e=t.oxw();t.s9C("src",e.product.image,t.LSH),t.MGl("alt","photo of the product: ",e.product.title,"")}}function P(o,r){1&o&&t._UZ(0,"div",3)}let Q=(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-image"]],inputs:{product:"product"},decls:2,vars:2,consts:[["class","image",3,"src","alt",4,"ngIf"],["class","image image__empty",4,"ngIf"],[1,"image",3,"src","alt"],[1,"image","image__empty"]],template:function(n,i){1&n&&(t.YNc(0,M,1,2,"img",0),t.YNc(1,P,1,0,"div",1)),2&n&&(t.Q6J("ngIf",i.product.image),t.xp6(1),t.Q6J("ngIf",!i.product.image))},dependencies:[s.O5],styles:[".image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image__empty[_ngcontent-%COMP%]{background-color:#fff;height:3.5rem}"]})}return o})();function z(o,r){if(1&o&&(t.TgZ(0,"span",7),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(t.xi3(2,1,e.product.price.amount,e.product.price.currency.code))}}function F(o,r){if(1&o&&(t.TgZ(0,"div",8),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}let N=(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-banner"]],inputs:{product:"product"},decls:11,vars:8,consts:[[1,"banner"],[1,"banner__data__title"],[1,"banner__data__price"],["class","banner__data__price__discount",4,"ngIf"],[1,"banner__data__description"],[1,"banner__data__badges"],["class","banner__data__badges__item",4,"ngFor","ngForOf"],[1,"banner__data__price__discount"],[1,"banner__data__badges__item"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"currency"),t.YNc(6,z,3,4,"span",3),t.qZA(),t.TgZ(7,"div",4),t._uU(8),t.qZA(),t.TgZ(9,"div",5),t.YNc(10,F,2,1,"div",6),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",i.product.title," "),t.xp6(2),t.hij(" ",t.xi3(5,5,i.product.price.amount-(i.product.price.discount||0),i.product.price.currency.code)," "),t.xp6(2),t.Q6J("ngIf",i.product.price.discount&&i.product.price.discount>0),t.xp6(2),t.hij(" ",i.product.description," "),t.xp6(2),t.Q6J("ngForOf",i.product.badges))},dependencies:[s.sg,s.O5,s.H9],styles:[".banner[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;display:flex;flex-direction:column;gap:.25rem}.banner__image[_ngcontent-%COMP%]{width:100%}.banner__data__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600}.banner__data__price[_ngcontent-%COMP%]{font-size:1rem;color:#363636;font-weight:550}.banner__data__price__discount[_ngcontent-%COMP%]{color:#989292;font-size:12px;font-weight:400;text-decoration:line-through}.banner__data__description[_ngcontent-%COMP%]{padding:.5rem 0;font-size:.75rem;color:#989292}.banner__data__badges[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.25rem;font-size:12px}.banner__data__badges__item[_ngcontent-%COMP%]{color:#fff;border-radius:10px;padding:.2rem .5rem;background-color:#21a300}"]})}return o})();var U=a(1959);let q=(()=>{class o{constructor(e){this.formBuilder=e,this.form=this.formBuilder.group({comment:[""],quantity:[1]})}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(p.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-observation"]],inputs:{form:"form"},decls:8,vars:2,consts:[[1,"observation",3,"formGroup"],[1,"observation__header__title"],[1,"observation__header__subtitle"],["formControlName","comment","rows","3",1,"observation__content"],[3,"form"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div")(2,"div",1),t._uU(3," Observaciones "),t.qZA(),t.TgZ(4,"div",2),t._uU(5," Escriba aqui cualquier aclaraci\xf3n. "),t.qZA()(),t._UZ(6,"textarea",3)(7,"app-quantity-selector",4),t.qZA()),2&n&&(t.Q6J("formGroup",i.form),t.xp6(7),t.Q6J("form",i.form))},dependencies:[U.y,p.Fj,p.JJ,p.JL,p.sg,p.u],styles:[".observation[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;padding:1rem;gap:1rem}.observation__header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.observation__header__title[_ngcontent-%COMP%]{font-size:1rem}.observation__header__subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#989292}.observation__content[_ngcontent-%COMP%]{resize:none;width:100%;box-sizing:border-box;background-color:#f6f6f6;border-radius:10px;padding:.5rem;border:none}.observation__content[_ngcontent-%COMP%]:focus{outline:2px solid #000000!important}"]})}return o})();var v=a(6709),g=a(1948);function Y(o,r){1&o&&(t.TgZ(0,"span",14),t._uU(1,"\xa0\xb7 No disponible"),t.qZA())}function w(o,r){if(1&o&&(t.TgZ(0,"div",15),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" + ",t.xi3(2,1,e.price.amount,null==e||null==e.price||null==e.price.currency?null:e.price.currency.code)," ")}}const x=function(o){return{"option-selector__options__item__name__disabled":o}},b=function(o){return{"option-selector__options__item__not-display":o}};function B(o,r){if(1&o&&(t.TgZ(0,"div",8)(1,"div")(2,"div",9),t._uU(3),t.YNc(4,Y,2,0,"span",10),t.qZA(),t.YNc(5,w,3,4,"div",11),t.qZA(),t.TgZ(6,"div",12),t._UZ(7,"mat-radio-button",13),t.qZA()()),2&o){const e=r.$implicit,n=r.index,i=t.oxw(2);t.xp6(2),t.Q6J("ngClass",t.VKq(8,x,!e.isActive)),t.xp6(1),t.hij(" ",null==e?null:e.title,""),t.xp6(1),t.Q6J("ngIf",!e.isActive),t.xp6(1),t.Q6J("ngIf",0!==(null==e||null==e.price?null:e.price.amount)&&e.isActive),t.xp6(1),t.Q6J("ngClass",t.VKq(10,b,i.enabled)),t.xp6(1),t.Q6J("disabled",!e.isActive)("checked",i.getChecked(n))("value",i.makeProduct(n,e))}}function S(o,r){if(1&o&&(t.TgZ(0,"div",5)(1,"mat-radio-group",6),t.YNc(2,B,8,12,"div",7),t.qZA()()),2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("ngForOf",null==e.customization?null:e.customization.options)}}function k(o,r){1&o&&(t.TgZ(0,"span",14),t._uU(1,"\xa0\xb7 No disponible"),t.qZA())}function E(o,r){if(1&o&&(t.TgZ(0,"div",15),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" + ",t.xi3(2,1,e.price.amount,null==e||null==e.price||null==e.price.currency?null:e.price.currency.code)," ")}}function j(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",8)(1,"div")(2,"div",9),t._uU(3),t.YNc(4,k,2,0,"span",10),t.qZA(),t.YNc(5,E,3,4,"div",11),t.qZA(),t.TgZ(6,"div",12)(7,"mat-checkbox",17),t.NdJ("change",function(i){const c=t.CHM(e),l=c.index,_=c.$implicit,d=t.oxw(2);return t.KtG(d.changePick(i,l,_))}),t.qZA()()()}if(2&o){const e=r.$implicit,n=r.index,i=t.oxw(2);t.xp6(2),t.Q6J("ngClass",t.VKq(6,x,!e.isActive)),t.xp6(1),t.hij(" ",null==e?null:e.title,""),t.xp6(1),t.Q6J("ngIf",!e.isActive),t.xp6(1),t.Q6J("ngIf",0!==(null==e||null==e.price?null:e.price.amount)&&e.isActive),t.xp6(1),t.Q6J("ngClass",t.VKq(8,b,i.enabled)),t.xp6(1),t.Q6J("formControlName",n)}}function G(o,r){if(1&o&&(t.TgZ(0,"div",5),t.ynx(1,16),t.YNc(2,j,8,10,"div",7),t.BQk(),t.qZA()),2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("ngForOf",null==e.customization?null:e.customization.options)}}let V=(()=>{class o{constructor(){}ngOnInit(){}changePick(e,n,i){const c=this.form.get("selected"),l=!!e.checked&&i;c.at(n).setValue(l);const _=c.getRawValue(),d=_.filter(m=>0!=m).length;_.forEach((m,u)=>{!1===m||m.isActive?d==this.customization.max&&0==m||!this.customization.options[u].isActive?c.at(u).disable():c.at(u).enable():c.at(u).disable()})}makeProduct(e,n){return this.customization?.options.map((i,c)=>c===e&&n)}getChecked(e){return this.form.getRawValue().selected.findIndex(n=>0!=n)===e}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-option-selector"]],inputs:{customization:"customization",form:"form",enabled:"enabled"},decls:8,vars:4,consts:[[1,"option-selector"],[1,"option-selector__header"],[1,"option-selector__header__title"],[1,"option-selector__header__description"],["class","option-selector__options",3,"formGroup",4,"ngIf"],[1,"option-selector__options",3,"formGroup"],["formControlName","selected"],["class","option-selector__options__item  option-selector__options__divider",4,"ngFor","ngForOf"],[1,"option-selector__options__item","option-selector__options__divider"],[1,"option-selector__options__item__name",3,"ngClass"],["class","option-selector__options__item__name__disabled__tag",4,"ngIf"],["class","option-selector__options__item__price",4,"ngIf"],[1,"option-selector__options__item__field",3,"ngClass"],["color","primary",3,"disabled","checked","value"],[1,"option-selector__options__item__name__disabled__tag"],[1,"option-selector__options__item__price"],["formArrayName","selected"],["color","primary",3,"formControlName","change"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t._uU(5),t.qZA()(),t.YNc(6,S,3,2,"div",4),t.YNc(7,G,3,2,"div",4),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",i.customization.name," "),t.xp6(2),t.hij(" Elige hasta ",i.customization.max," "),t.xp6(1),t.Q6J("ngIf",1===i.customization.max),t.xp6(1),t.Q6J("ngIf",i.customization.max>1))},dependencies:[s.mk,s.sg,s.O5,v.oG,p.JJ,p.JL,p.sg,p.u,p.CE,g.VQ,g.U0,s.H9],styles:[".option-selector[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:column;padding:1rem;gap:.5rem}.option-selector__header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.option-selector__header__title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.option-selector__header__description[_ngcontent-%COMP%]{font-size:.75rem;color:#989292}.option-selector__options[_ngcontent-%COMP%]{display:flex;flex-direction:column}.option-selector__options__divider[_ngcontent-%COMP%]:not(:last-child){border-bottom:#EBEBEB solid 1px}.option-selector__options__item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:.75rem}.option-selector__options__item__name__disabled[_ngcontent-%COMP%]{color:#626262;text-decoration:line-through}.option-selector__options__item__name__disabled__tag[_ngcontent-%COMP%]{text-decoration:none;display:inline-block}.option-selector__options__item__price[_ngcontent-%COMP%]{color:#626262}.option-selector__options__item__price__disabled[_ngcontent-%COMP%]{color:#626262;text-decoration:line-through}.option-selector__options__item__not-display[_ngcontent-%COMP%]{visibility:hidden}"]})}return o})();function D(o,r){1&o&&t._UZ(0,"div",9)}function L(o,r){if(1&o&&t._UZ(0,"app-option-selector",10),2&o){const e=r.$implicit,n=r.index,i=t.oxw(2);t.Q6J("form",i.getFormElement(n))("enabled",!i.store.cartEnabled)("customization",e)}}function R(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-floating-button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.addItem())}),t.ALo(1,"currency"),t.qZA()}if(2&o){const e=t.oxw(2);t.MGl("title","agregar al pedido \xb7 ",t.xi3(1,2,e.price,e.product.price.currency.code),""),t.Q6J("hidden",!e.store.cartEnabled)}}function $(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-floating-button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.updateItem())}),t.ALo(1,"currency"),t.qZA()}if(2&o){const e=t.oxw(2);t.MGl("title","modificar pedido \xb7 ",t.xi3(1,2,e.price,e.product.price.currency.code),""),t.Q6J("hidden",!e.store.cartEnabled)}}function H(o,r){if(1&o&&(t.ynx(0),t._UZ(1,"app-image",2),t.YNc(2,D,1,0,"div",3),t.TgZ(3,"div",4),t._UZ(4,"app-banner",5),t.YNc(5,L,1,3,"app-option-selector",6),t._UZ(6,"app-observation",7),t.YNc(7,R,2,5,"app-floating-button",8),t.YNc(8,$,2,5,"app-floating-button",8),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("product",e.product),t.xp6(1),t.Q6J("ngIf",!e.product.image),t.xp6(2),t.Q6J("product",e.product),t.xp6(1),t.Q6J("ngForOf",e.product.customizations),t.xp6(1),t.Q6J("hidden",!e.store.cartEnabled)("form",e.form),t.xp6(1),t.Q6J("ngIf",!e.cartItem),t.xp6(1),t.Q6J("ngIf",e.cartItem)}}let K=(()=>{class o{constructor(e,n,i,c,l,_,d){this.formBuilder=e,this.cartService=n,this.router=i,this.activatedRoute=c,this.productService=l,this.storeService=_,this.location=d,this.form=this.formBuilder.group({quantity:[1],product:null,comment:[""],selections:[]}),this.error=!1,this.catalogId=this.activatedRoute.snapshot.queryParamMap.get("catalog")||void 0,this.productId=this.activatedRoute.snapshot.paramMap.get("productId")||void 0,this.cartItem=this.activatedRoute.snapshot.queryParamMap.get("cartItem")||void 0,this.store={},this.product={id:"",title:"",price:{discount:0,amount:0,currency:{code:"",name:"",symbol:""}},description:"",badges:[],image:"",customizations:[]}}ngOnInit(){if(this.store=this.storeService.getStoreFromLocalStorage(),this.catalogId&&this.productId)if(this.cartItem){const e=this.cartService.getItem(this.cartItem,this.catalogId);console.log(e),e.product&&(this.product=e.product),this.form=this.initForm(),this.form.patchValue(e)}else this.productService.getProduct(this.catalogId,this.productId).subscribe({next:e=>{this.product=e,this.form=this.initForm()},error:()=>{this.router.navigate(["not-found"])}})}initForm(){const e=n=>1===n.max?{selected:this.formBuilder.control({value:n.options.map((i,c)=>1===n.max&&c===n.options.map(l=>l.isActive).indexOf(!0)&&i),disabled:!1})}:{selected:this.formBuilder.array(n.options.map((i,c)=>this.formBuilder.control({value:1===n.max&&0==c&&i,disabled:!i.isActive})))};return this.formBuilder.group({id:"",quantity:[1],product:this.product,comment:[""],selections:this.formBuilder.array(this.product?.customizations?.map(n=>this.formBuilder.group({id:[n?.id],...e(n)}))||[])})}getFormElement(e){return this.form.get("selections").at(e)}addItem(){this.cartService.addItem(this.form.getRawValue(),this.catalogId),this.location.back()}updateItem(){this.cartService.updateItem(this.form.getRawValue(),this.catalogId),this.location.back()}get price(){const e=this.form.getRawValue(),n=e?.selections?.map(i=>i.selected.filter(c=>!1!==c).map(c=>c.price).reduce((c,l)=>c+l.amount-(l.discount||0),0)).reduce((i,c)=>i+c,0);return(this.product.price.amount-(this.product.price.discount||0)+n)*e.quantity}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(p.qu),t.Y36(C.N),t.Y36(f.F0),t.Y36(f.gz),t.Y36(I),t.Y36(A.d),t.Y36(s.Ye))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-detail"]],decls:3,vars:1,consts:[[1,"detail"],[4,"ngIf"],[1,"detail__image",3,"product"],["class","detail__image__empty",4,"ngIf"],[1,"detail__content"],[3,"product"],[3,"form","enabled","customization",4,"ngFor","ngForOf"],[3,"hidden","form"],[3,"hidden","title","click",4,"ngIf"],[1,"detail__image__empty"],[3,"form","enabled","customization"],[3,"hidden","title","click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"app-navigator"),t.YNc(2,H,9,8,"ng-container",1),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngIf",!i.error))},dependencies:[s.sg,s.O5,T.S,J.w,Q,N,q,V,s.H9],styles:[".detail[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;margin-bottom:5rem}.detail__image[_ngcontent-%COMP%]{height:12.5rem}.detail__image__empty[_ngcontent-%COMP%]{background-color:#fff;height:3.5rem}.detail__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}"]})}return o})();var X=a(5621),W=a(7392);const tt=[{path:":productId",component:K}];let et=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[s.ez,f.Bz.forChild(tt),X.m,W.Ps,v.p9,p.UX,g.Fk]})}return o})()}}]);